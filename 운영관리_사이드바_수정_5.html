<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì—…ë¬´ê´€ë¦¬ì‹œìŠ¤í…œ - ìš´ì˜ê´€ë¦¬</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            toss: {
              blue: '#202454',
              'blue-light': '#3182f6',
              'gray-900': '#191f28',
              'gray-700': '#333d4b',
              'gray-500': '#6b7684',
              'gray-400': '#8b95a1',
              'gray-300': '#d1d6db',
              'gray-200': '#e5e8eb',
              'gray-100': '#f2f4f6',
              'gray-50': '#f9fafb',
            },
            navy: {
              400: '#3d4a7a',
              500: '#202454',
              600: '#191c40',
            }
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
    * { font-family: 'Pretendard', -apple-system, sans-serif; }

    /* ì‚¬ì´ë“œë°” */
    .sidebar {
      width: 220px;
      background: white;
      border-right: 1px solid #e5e8eb;
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      overflow-y: auto;
    }
    .main-content {
      margin-left: 220px;
      min-height: 100vh;
      background: #f9fafb;
    }
    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 16px;
      color: #6b7684;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.15s;
      border-radius: 8px;
      margin: 2px 8px;
    }
    .nav-item:hover { background: #f2f4f6; color: #333d4b; }
    .nav-item.active { background: #202454; color: white; }
    .nav-item.active:hover { background: #191c40; }
    .nav-sub-item {
      display: block;
      padding: 8px 16px 8px 44px;
      color: #8b95a1;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.15s;
      border-radius: 6px;
      margin: 1px 8px;
    }
    .nav-sub-item:hover { background: #f2f4f6; color: #333d4b; }
    .nav-sub-item.active { background: #e8f4ff; color: #202454; font-weight: 500; }

    /* í…Œì´ë¸” */
    .data-table { width: 100%; border-collapse: collapse; }
    .data-table th {
      text-align: left;
      padding: 12px 16px;
      font-size: 13px;
      font-weight: 500;
      color: #6b7684;
      border-bottom: 1px solid #e5e8eb;
      white-space: nowrap;
    }
    .data-table td {
      padding: 14px 16px;
      font-size: 14px;
      color: #333d4b;
      border-bottom: 1px solid #f2f4f6;
    }
    .data-table tr:hover td { background: #f9fafb; }

    /* ìƒíƒœ ë±ƒì§€ */
    .status-badge {
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
      white-space: nowrap;
      display: inline-block;
    }

    /* ë ˆë²¨ ë±ƒì§€ */
    .level-badge { padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; white-space: nowrap; display: inline-block; }
    .level-VIP { background: linear-gradient(135deg, #ffd700 0%, #ffb800 100%); color: #7c5800; }
    .level-L4 { background: #fee2e2; color: #dc2626; }
    .level-L3 { background: #fef3c7; color: #d97706; }
    .level-L2 { background: #dbeafe; color: #2563eb; }
    .level-L1 { background: #f1f5f9; color: #64748b; }

    /* ë²„íŠ¼ */
    .btn-primary {
      padding: 10px 20px;
      background: #202454;
      color: white;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.15s;
      cursor: pointer;
      border: none;
    }
    .btn-primary:hover { background: #191c40; }
    .btn-outline {
      padding: 10px 20px;
      background: white;
      color: #333d4b;
      border: 1px solid #d1d6db;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.15s;
      cursor: pointer;
    }
    .btn-outline:hover { background: #f2f4f6; }

    /* ëª¨ë‹¬ */
    .modal-overlay {
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
    }
    .modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    .modal-container {
      transform: scale(0.95) translateY(10px);
      transition: all 0.2s ease;
    }
    .modal-overlay.show .modal-container {
      transform: scale(1) translateY(0);
    }

    /* íƒ­ ìˆ¨ê¹€ */
    .operation-tab-content { display: none; }
    .operation-tab-content.active { display: block; }

    /* í† ìŠ¤íŠ¸ */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #333d4b;
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 500;
      z-index: 9999;
      opacity: 0;
      transition: all 0.3s ease;
    }
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    /* íŒŒì´í”„ë¼ì¸ ì¹´ë“œ */
    .pipeline-card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 8px;
      border: 1px solid #e5e8eb;
      cursor: pointer;
      transition: all 0.15s;
    }
    .pipeline-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transform: translateY(-2px);
    }
  </style>
</head>
<body class="bg-toss-gray-50">

  <!-- ì‚¬ì´ë“œë°” -->
  <aside class="sidebar">
    <div class="p-4 border-b border-toss-gray-200">
      <h1 class="text-base font-bold text-toss-blue">ì—…ë¬´ê´€ë¦¬ì‹œìŠ¤í…œ</h1>
      <p class="text-xs text-toss-gray-400 mt-0.5">í•´ì™¸ì…ì ì‚¬ì—…</p>
    </div>

    <nav class="py-4">
      <p class="px-4 text-xs text-toss-gray-400 font-medium mb-2">ë©”ì¸</p>
      <div class="nav-item">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
        ëŒ€ì‹œë³´ë“œ
      </div>
      <div class="nav-item">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"/></svg>
        ê³µì§€/ê²°ì •ì‚¬í•­
      </div>
      <div class="nav-item">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
        í”„ë¡œì„¸ìŠ¤í˜„í™©
      </div>

      <p class="px-4 text-xs text-toss-gray-400 font-medium mb-2 mt-6">ê´€ë¦¬</p>
      
      <!-- ìš´ì˜ê´€ë¦¬ (í˜„ì¬ í™œì„±) -->
      <div class="nav-item active" onclick="toggleSideMenu('operation')">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
        ìš´ì˜ê´€ë¦¬
        <svg class="w-4 h-4 ml-auto transform transition-transform" id="operation-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
      </div>
      <div id="operation-submenu">
        <div class="nav-sub-item active" onclick="switchSubTab('cs')">CSê´€ë¦¬</div>
        <div class="nav-sub-item" onclick="switchSubTab('buyer')">ë°”ì´ì–´ê´€ë¦¬</div>
        <div class="nav-sub-item" onclick="switchSubTab('product')">ìƒí’ˆ/ë¦¬ìŠ¤íŒ…ê´€ë¦¬</div>
        <div class="nav-sub-item" onclick="switchSubTab('quote')">ê²¬ì /í˜‘ìƒê´€ë¦¬</div>
      </div>

      <!-- í™•ì¥/ê±°ë˜ê´€ë¦¬ -->
      <div class="nav-item" onclick="toggleSideMenu('trade')">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/></svg>
        í™•ì¥/ê±°ë˜ê´€ë¦¬
        <svg class="w-4 h-4 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
      </div>

      <div class="nav-item">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
        ê¸°íš/ë³´ê³ 
      </div>
    </nav>
  </aside>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <div class="main-content">
    <div class="px-8 py-6">

      <!-- ==================== CSê´€ë¦¬ íƒ­ ==================== -->
      <div id="csTab" class="operation-tab-content active">
        <!-- í—¤ë” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm mb-6">
          <div class="px-8 pt-8 pb-6">
            <h1 class="text-2xl font-bold text-toss-gray-900">CSê´€ë¦¬</h1>
            <p class="text-sm text-toss-gray-500 mt-1">ê³ ê° ë¬¸ì˜ ë° í´ë ˆì„ ê´€ë¦¬</p>
          </div>
        </div>
        
        <!-- ìš”ì•½ ì¹´ë“œ -->
        <div class="grid grid-cols-4 gap-4 mb-6">
          <div class="bg-white rounded-xl p-5 border border-toss-gray-200">
            <p class="text-sm text-toss-gray-500">ì „ì²´ ë¬¸ì˜</p>
            <p class="text-2xl font-bold text-toss-gray-900 mt-1" id="cs-total">7</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-red-200">
            <p class="text-sm text-red-600">ë¯¸ì²˜ë¦¬</p>
            <p class="text-2xl font-bold text-red-600 mt-1" id="cs-pending">3</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-amber-200">
            <p class="text-sm text-amber-600">ì²˜ë¦¬ì¤‘</p>
            <p class="text-2xl font-bold text-amber-600 mt-1" id="cs-progress">2</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-green-200">
            <p class="text-sm text-green-600">ì™„ë£Œ</p>
            <p class="text-2xl font-bold text-green-600 mt-1" id="cs-completed">2</p>
          </div>
        </div>

        <!-- í…Œì´ë¸” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm">
          <div class="px-6 py-4 border-b border-toss-gray-200 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <select id="cs-filter-status" onchange="renderCSTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ìƒíƒœ</option>
                <option value="pending">ë¯¸ì²˜ë¦¬</option>
                <option value="progress">ì²˜ë¦¬ì¤‘</option>
                <option value="completed">ì™„ë£Œ</option>
              </select>
              <select id="cs-filter-priority" onchange="renderCSTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ìš°ì„ ìˆœìœ„</option>
                <option value="high">ê¸´ê¸‰</option>
                <option value="medium">ë³´í†µ</option>
                <option value="low">ë‚®ìŒ</option>
              </select>
              <select id="cs-filter-type" onchange="renderCSTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ìœ í˜•</option>
                <option value="ìƒí’ˆ ë¬¸ì˜">ìƒí’ˆ ë¬¸ì˜</option>
                <option value="ë°°ì†¡ ë¬¸ì˜">ë°°ì†¡ ë¬¸ì˜</option>
                <option value="í´ë ˆì„">í´ë ˆì„</option>
                <option value="ë°˜í’ˆ/êµí™˜">ë°˜í’ˆ/êµí™˜</option>
                <option value="ì„œë¥˜ ìš”ì²­">ì„œë¥˜ ìš”ì²­</option>
              </select>
            </div>
            <div class="flex items-center gap-3">
              <div class="relative">
                <input type="text" id="cs-search" onkeyup="renderCSTable()" placeholder="ë°”ì´ì–´, ì œëª© ê²€ìƒ‰..." class="text-sm border border-toss-gray-200 rounded-lg pl-9 pr-3 py-2 w-60">
                <svg class="w-4 h-4 text-toss-gray-400 absolute left-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
              </div>
              <button onclick="openCSRegisterModal()" class="btn-primary text-sm">+ ë¬¸ì˜ ë“±ë¡</button>
            </div>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th class="w-[50px]">No</th>
                <th class="w-[70px]">ìš°ì„ ìˆœìœ„</th>
                <th class="w-[80px]">ìƒíƒœ</th>
                <th class="w-[90px]">ìœ í˜•</th>
                <th>ì œëª©</th>
                <th class="w-[130px]">ë°”ì´ì–´</th>
                <th class="w-[80px]">ë‹´ë‹¹</th>
                <th class="w-[100px]">ë“±ë¡ì¼</th>
              </tr>
            </thead>
            <tbody id="cs-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- ==================== ë°”ì´ì–´ê´€ë¦¬ íƒ­ ==================== -->
      <div id="buyerTab" class="operation-tab-content">
        <!-- í—¤ë” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm mb-6">
          <div class="px-8 pt-8 pb-6">
            <h1 class="text-2xl font-bold text-toss-gray-900">ë°”ì´ì–´ê´€ë¦¬</h1>
            <p class="text-sm text-toss-gray-500 mt-1">ë°”ì´ì–´ ì •ë³´ ë° ë“±ê¸‰ ê´€ë¦¬</p>
          </div>
        </div>
        
        <!-- ìš”ì•½ ì¹´ë“œ -->
        <div class="grid grid-cols-5 gap-4 mb-6">
          <div class="bg-white rounded-xl p-5 border border-toss-gray-200">
            <p class="text-sm text-toss-gray-500">ì „ì²´ ë°”ì´ì–´</p>
            <p class="text-2xl font-bold text-toss-gray-900 mt-1">8</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-amber-200">
            <p class="text-sm text-amber-600">VIP</p>
            <p class="text-2xl font-bold text-amber-600 mt-1">2</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-red-200">
            <p class="text-sm text-red-600">L4 (ëŒ€í˜•)</p>
            <p class="text-2xl font-bold text-red-600 mt-1">3</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-blue-200">
            <p class="text-sm text-blue-600">L3 (ì¤‘í˜•)</p>
            <p class="text-2xl font-bold text-blue-600 mt-1">2</p>
          </div>
          <div class="bg-white rounded-xl p-5 border border-toss-gray-200">
            <p class="text-sm text-toss-gray-500">L2/L1</p>
            <p class="text-2xl font-bold text-toss-gray-700 mt-1">1</p>
          </div>
        </div>

        <!-- í…Œì´ë¸” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm">
          <div class="px-6 py-4 border-b border-toss-gray-200 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <select id="buyer-filter-level" onchange="renderBuyerTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ë“±ê¸‰</option>
                <option value="VIP">VIP</option>
                <option value="L4">L4</option>
                <option value="L3">L3</option>
                <option value="L2">L2</option>
                <option value="L1">L1</option>
              </select>
              <select id="buyer-filter-status" onchange="renderBuyerTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ìƒíƒœ</option>
                <option value="active">í™œì„±</option>
                <option value="negotiation">í˜‘ìƒì¤‘</option>
                <option value="dormant">íœ´ë©´</option>
              </select>
            </div>
            <div class="flex items-center gap-3">
              <div class="relative">
                <input type="text" id="buyer-search" onkeyup="renderBuyerTable()" placeholder="íšŒì‚¬ëª…, ë‹´ë‹¹ì ê²€ìƒ‰..." class="text-sm border border-toss-gray-200 rounded-lg pl-9 pr-3 py-2 w-60">
                <svg class="w-4 h-4 text-toss-gray-400 absolute left-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
              </div>
              <button onclick="openBuyerRegisterModal()" class="btn-primary text-sm">+ ë°”ì´ì–´ ë“±ë¡</button>
            </div>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th class="w-[50px]">No</th>
                <th class="w-[60px]">ë“±ê¸‰</th>
                <th>íšŒì‚¬ëª…</th>
                <th class="w-[100px]">ë‹´ë‹¹ì</th>
                <th class="w-[80px]">êµ­ê°€</th>
                <th class="w-[120px]">ì˜ˆìƒê±°ë˜ì•¡</th>
                <th class="w-[80px]">ìƒíƒœ</th>
                <th class="w-[100px]">ìµœê·¼ì—°ë½</th>
                <th class="w-[80px]">ë‹´ë‹¹</th>
              </tr>
            </thead>
            <tbody id="buyer-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- ==================== ìƒí’ˆ/ë¦¬ìŠ¤íŒ…ê´€ë¦¬ íƒ­ ==================== -->
      <div id="productTab" class="operation-tab-content">
        <!-- í—¤ë” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm mb-6">
          <div class="px-8 pt-8 pb-6">
            <h1 class="text-2xl font-bold text-toss-gray-900">ìƒí’ˆ/ë¦¬ìŠ¤íŒ…ê´€ë¦¬</h1>
            <p class="text-sm text-toss-gray-500 mt-1">ìƒí’ˆ ë“±ë¡ ë° ë¦¬ìŠ¤íŒ… í˜„í™©</p>
          </div>
        </div>
        
        <!-- ìš”ì•½ ì¹´ë“œ -->
        <div class="grid grid-cols-5 gap-4 mb-6">
          <div class="bg-white rounded-xl p-5 border border-toss-gray-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-toss-gray-500">ì „ì²´ ìƒí’ˆ</p>
                <p class="text-2xl font-bold text-toss-gray-900 mt-1">48</p>
              </div>
              <div class="w-10 h-10 bg-toss-gray-100 rounded-lg flex items-center justify-center text-lg">ğŸ“¦</div>
            </div>
          </div>
          <div class="bg-white rounded-xl p-5 border border-blue-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-blue-600">ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ</p>
                <p class="text-2xl font-bold text-blue-600 mt-1">11</p>
              </div>
              <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-lg">ğŸª£</div>
            </div>
          </div>
          <div class="bg-white rounded-xl p-5 border border-purple-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-purple-600">íŠ¹ìˆ˜ê¸°ëŠ¥ì„± ë„ë£Œ</p>
                <p class="text-2xl font-bold text-purple-600 mt-1">11</p>
              </div>
              <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-lg">ğŸ›¢ï¸</div>
            </div>
          </div>
          <div class="bg-white rounded-xl p-5 border border-green-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-green-600">ìœ ì„± íŠ¹ìˆ˜ë„ë£Œ</p>
                <p class="text-2xl font-bold text-green-600 mt-1">9</p>
              </div>
              <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-lg">ğŸ§ª</div>
            </div>
          </div>
          <div class="bg-white rounded-xl p-5 border border-amber-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-amber-600">íŒŒìš°ë”/ì‹œíŠ¸</p>
                <p class="text-2xl font-bold text-amber-600 mt-1">17</p>
              </div>
              <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center text-lg">ğŸ“‹</div>
            </div>
          </div>
        </div>

        <!-- í…Œì´ë¸” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm">
          <div class="px-6 py-4 border-b border-toss-gray-200 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <select id="product-filter-category" onchange="renderProductTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                <option value="ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ">ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ</option>
                <option value="íŠ¹ìˆ˜ê¸°ëŠ¥ì„± ë„ë£Œ">íŠ¹ìˆ˜ê¸°ëŠ¥ì„± ë„ë£Œ</option>
                <option value="ìœ ì„± íŠ¹ìˆ˜ë„ë£Œ">ìœ ì„± íŠ¹ìˆ˜ë„ë£Œ</option>
                <option value="íŒŒìš°ë”">íŒŒìš°ë”</option>
                <option value="íŠ¹ìˆ˜ì‹œíŠ¸">íŠ¹ìˆ˜ì‹œíŠ¸</option>
              </select>
              <select id="product-filter-status" onchange="renderProductTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ìƒíƒœ</option>
                <option value="active">í™œì„±</option>
                <option value="review">ê²€ìˆ˜ì¤‘</option>
                <option value="inactive">ë¹„í™œì„±</option>
              </select>
            </div>
            <div class="flex items-center gap-3">
              <div class="relative">
                <input type="text" id="product-search" onkeyup="renderProductTable()" placeholder="ìƒí’ˆëª… ê²€ìƒ‰..." class="text-sm border border-toss-gray-200 rounded-lg pl-9 pr-3 py-2 w-60">
                <svg class="w-4 h-4 text-toss-gray-400 absolute left-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
              </div>
            </div>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th class="w-[50px]">No</th>
                <th class="w-[50px]"></th>
                <th>ìƒí’ˆëª…</th>
                <th class="w-[140px]">ì¹´í…Œê³ ë¦¬</th>
                <th class="w-[100px]">ê·œê²©</th>
                <th class="w-[100px]">ë„í¬ëŸ‰</th>
                <th class="w-[80px]">ìƒíƒœ</th>
                <th class="w-[80px]">ì¡°íšŒìˆ˜</th>
                <th class="w-[80px]">ë¬¸ì˜ìˆ˜</th>
              </tr>
            </thead>
            <tbody id="product-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- ==================== ê²¬ì /í˜‘ìƒê´€ë¦¬ íƒ­ ==================== -->
      <div id="quoteTab" class="operation-tab-content">
        <!-- í—¤ë” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm mb-6">
          <div class="px-8 pt-8 pb-6">
            <h1 class="text-2xl font-bold text-toss-gray-900">ê²¬ì /í˜‘ìƒê´€ë¦¬</h1>
            <p class="text-sm text-toss-gray-500 mt-1">ê²¬ì  ìš”ì²­ ë° í˜‘ìƒ í˜„í™©</p>
          </div>
        </div>

        <!-- íŒŒì´í”„ë¼ì¸ ë·° -->
        <div class="grid grid-cols-4 gap-4 mb-6">
          <!-- ê²¬ì  ìš”ì²­ -->
          <div class="bg-toss-gray-100 rounded-xl p-4">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-semibold text-toss-gray-700">ğŸ“‹ ê²¬ì  ìš”ì²­</h3>
              <span class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full" id="pipeline-request">2</span>
            </div>
            <div id="pipeline-request-list" class="space-y-2"></div>
          </div>
          <!-- í˜‘ìƒì¤‘ -->
          <div class="bg-toss-gray-100 rounded-xl p-4">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-semibold text-toss-gray-700">ğŸ’¬ í˜‘ìƒì¤‘</h3>
              <span class="text-xs bg-amber-100 text-amber-600 px-2 py-1 rounded-full" id="pipeline-negotiation">3</span>
            </div>
            <div id="pipeline-negotiation-list" class="space-y-2"></div>
          </div>
          <!-- ê³„ì•½ ì§„í–‰ -->
          <div class="bg-toss-gray-100 rounded-xl p-4">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-semibold text-toss-gray-700">ğŸ“ ê³„ì•½ ì§„í–‰</h3>
              <span class="text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-full" id="pipeline-contract">2</span>
            </div>
            <div id="pipeline-contract-list" class="space-y-2"></div>
          </div>
          <!-- ì™„ë£Œ -->
          <div class="bg-toss-gray-100 rounded-xl p-4">
            <div class="flex items-center justify-between mb-3">
              <h3 class="font-semibold text-toss-gray-700">âœ… ì™„ë£Œ</h3>
              <span class="text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full" id="pipeline-complete">1</span>
            </div>
            <div id="pipeline-complete-list" class="space-y-2"></div>
          </div>
        </div>

        <!-- í…Œì´ë¸” ì˜ì—­ -->
        <div class="bg-white rounded-2xl shadow-sm">
          <div class="px-6 py-4 border-b border-toss-gray-200 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <select id="quote-filter-status" onchange="renderQuoteTable()" class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option value="">ì „ì²´ ìƒíƒœ</option>
                <option value="request">ê²¬ì  ìš”ì²­</option>
                <option value="negotiation">í˜‘ìƒì¤‘</option>
                <option value="contract">ê³„ì•½ ì§„í–‰</option>
                <option value="complete">ì™„ë£Œ</option>
              </select>
              <select class="text-sm border border-toss-gray-200 rounded-lg px-3 py-2 bg-white">
                <option>ì „ì²´ ê¸°ê°„</option>
                <option>ì´ë²ˆ ì£¼</option>
                <option>ì´ë²ˆ ë‹¬</option>
                <option>3ê°œì›”</option>
              </select>
            </div>
            <div class="flex items-center gap-3">
              <div class="relative">
                <input type="text" id="quote-search" onkeyup="renderQuoteTable()" placeholder="ë°”ì´ì–´, ìƒí’ˆ ê²€ìƒ‰..." class="text-sm border border-toss-gray-200 rounded-lg pl-9 pr-3 py-2 w-60">
                <svg class="w-4 h-4 text-toss-gray-400 absolute left-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
              </div>
              <button onclick="openQuoteRegisterModal()" class="btn-primary text-sm">+ ê²¬ì  ë“±ë¡</button>
            </div>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th class="w-[100px]">ê²¬ì ë²ˆí˜¸</th>
                <th>ë°”ì´ì–´</th>
                <th>ìƒí’ˆ</th>
                <th class="w-[80px]">ìˆ˜ëŸ‰</th>
                <th class="w-[120px]">ê²¬ì ê¸ˆì•¡</th>
                <th class="w-[100px]">ìƒíƒœ</th>
                <th class="w-[100px]">ìš”ì²­ì¼</th>
                <th class="w-[80px]">ë‹´ë‹¹</th>
              </tr>
            </thead>
            <tbody id="quote-table-body"></tbody>
          </table>
        </div>
      </div>

    </div>
  </div>

  <!-- ìƒì„¸ ëª¨ë‹¬ -->
  <div id="detail-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4" onclick="closeDetailModal(event)">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
    <div class="modal-container relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[85vh] flex flex-col" onclick="event.stopPropagation()">
      <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-slate-50 rounded-t-2xl">
        <div class="flex items-center gap-2">
          <span id="modal-icon" class="text-xl">ğŸ“‹</span>
          <span class="font-semibold text-slate-700" id="modal-type">ìƒì„¸ ì •ë³´</span>
        </div>
        <div class="flex items-center gap-1">
          <button id="modal-edit-btn" onclick="openCSEditMode()" class="p-2 hover:bg-slate-200 rounded-xl transition-colors hidden" title="ìˆ˜ì •">
            <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          </button>
          <button onclick="closeDetailModal()" class="p-2 hover:bg-slate-200 rounded-xl transition-colors">
            <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>
      </div>
      <div class="flex-1 overflow-y-auto p-6" id="modal-content"></div>
    </div>
  </div>

  <!-- ë©€í‹°ìœ ì¦ˆ ìƒí’ˆ ìƒì„¸ ëª¨ë‹¬ -->
  <div id="multiuse-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4" onclick="closeMultiuseModal(event)">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
    <div class="modal-container relative bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col" onclick="event.stopPropagation()">
      <div class="px-6 py-4 border-b border-slate-200 bg-white rounded-t-2xl">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg>
            </div>
            <div>
              <h2 class="text-base font-bold text-slate-800" id="multiuse-title">POUR ì½”íŠ¸ì¬ I</h2>
              <p class="text-xs text-slate-400" id="multiuse-subtitle">ìˆ˜ìš©ì„± ì•„í¬ë¦´ í´ë¦¬ë¨¸ Â· ë©€í‹°ìœ ì¦ˆ 20ê°œ ì œí’ˆ</p>
            </div>
          </div>
          <button onclick="closeMultiuseModal()" class="p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-400 hover:text-slate-600">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>
        <div id="multiuse-common-info" class="bg-slate-50 rounded-xl p-4">
          <p class="text-xs text-slate-500 mb-2">ê³µí†µ ë‚´ìš© <span class="text-slate-400">(ìµœì†Œ 1í†¤)</span></p>
          <div class="flex items-center gap-2 text-xs">
            <div class="flex-1 bg-white rounded-lg px-3 py-2 text-center border border-slate-200">
              <p class="text-slate-400 mb-0.5">1kg</p>
              <p class="font-semibold text-slate-700">â‚©7,100</p>
              <p class="text-slate-400">Ã—1,000</p>
            </div>
            <div class="flex-1 bg-white rounded-lg px-3 py-2 text-center border border-slate-200">
              <p class="text-slate-400 mb-0.5">5kg</p>
              <p class="font-semibold text-slate-700">â‚©35,500</p>
              <p class="text-slate-400">Ã—200</p>
            </div>
            <div class="flex-1 bg-white rounded-lg px-3 py-2 text-center border border-slate-200">
              <p class="text-slate-400 mb-0.5">10kg</p>
              <p class="font-semibold text-slate-700">â‚©71,000</p>
              <p class="text-slate-400">Ã—100</p>
            </div>
            <div class="flex-1 bg-slate-700 rounded-lg px-3 py-2 text-center">
              <p class="text-slate-300 mb-0.5">20kg</p>
              <p class="font-semibold text-white">â‚©142,000</p>
              <p class="text-slate-400">Ã—50</p>
            </div>
            <div class="flex-1 bg-white rounded-lg px-3 py-2 text-center border border-slate-200">
              <p class="text-slate-400 mb-0.5">IBC</p>
              <p class="font-semibold text-slate-700">â‚©7.1M</p>
              <p class="text-slate-400">Ã—1</p>
            </div>
          </div>
        </div>
      </div>
      <div class="flex flex-1 overflow-hidden">
        <div class="w-64 border-r border-slate-200 flex flex-col bg-slate-50/50">
          <div class="p-3 border-b border-slate-100">
            <p class="text-xs text-slate-500 mb-2">ë©€í‹°ìœ ì¦ˆ ì œí’ˆ (<span id="multiuse-count">20</span>)</p>
            <div class="relative">
              <input type="text" id="multiuseSearchInput" onkeyup="filterMultiuseProducts()" placeholder="ê²€ìƒ‰..." class="w-full pl-8 pr-3 py-1.5 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-slate-300 focus:border-slate-300 bg-white">
              <svg class="w-4 h-4 text-slate-400 absolute left-2.5 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            </div>
          </div>
          <div class="flex-1 overflow-y-auto p-2 space-y-0.5" id="multiuseProductList"></div>
        </div>
        <div class="flex-1 overflow-y-auto bg-white">
          <div class="p-6" id="multiuseDetailContent"></div>
        </div>
      </div>
      <div class="px-6 py-4 border-t border-slate-200 bg-white rounded-b-2xl flex items-center gap-3">
        <button class="flex-1 px-4 py-2.5 text-sm bg-slate-700 text-white rounded-lg hover:bg-slate-800 transition-colors font-medium">ë¦¬ìŠ¤íŒ… ìˆ˜ì •</button>
        <button class="flex-1 px-4 py-2.5 text-sm bg-white text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors font-medium">ì„±ê³¼ ë¶„ì„</button>
      </div>
    </div>
  </div>

  <!-- CS ë¬¸ì˜ ë“±ë¡ ëª¨ë‹¬ -->
  <div id="cs-register-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4" onclick="closeCSRegisterModal(event)">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
    <div class="modal-container relative bg-white rounded-2xl shadow-2xl w-full max-w-xl max-h-[90vh] flex flex-col" onclick="event.stopPropagation()">
      <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-rose-50 to-orange-50 rounded-t-2xl">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-rose-100 rounded-xl flex items-center justify-center">
            <span class="text-xl">ğŸ“</span>
          </div>
          <div>
            <h3 class="font-semibold text-slate-800">CS ë¬¸ì˜ ë“±ë¡</h3>
            <p class="text-xs text-slate-500">ë°”ì´ì–´ ìš”ì²­, íŒ€ê³¼ í•¨ê»˜ ë¹ ë¥´ê²Œ í•´ê²°í•©ë‹ˆë‹¤</p>
          </div>
        </div>
        <button onclick="closeCSRegisterModal()" class="p-2 hover:bg-white/60 rounded-xl transition-colors">
          <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="flex-1 overflow-y-auto p-6">
        <form id="cs-register-form" class="space-y-5">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ìš°ì„ ìˆœìœ„ <span class="text-rose-500">*</span></label>
              <select id="cs-reg-priority" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400 bg-white">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="high">ğŸ”´ ê¸´ê¸‰</option>
                <option value="medium">ğŸŸ¡ ë³´í†µ</option>
                <option value="low">ğŸŸ¢ ë‚®ìŒ</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ë¬¸ì˜ ìœ í˜• <span class="text-rose-500">*</span></label>
              <select id="cs-reg-type" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400 bg-white">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="ìƒí’ˆ ë¬¸ì˜">ğŸ“¦ ìƒí’ˆ ë¬¸ì˜</option>
                <option value="ë°°ì†¡ ë¬¸ì˜">ğŸšš ë°°ì†¡ ë¬¸ì˜</option>
                <option value="í´ë ˆì„">âš ï¸ í´ë ˆì„</option>
                <option value="ë°˜í’ˆ/êµí™˜">ğŸ”„ ë°˜í’ˆ/êµí™˜</option>
                <option value="ì„œë¥˜ ìš”ì²­">ğŸ“„ ì„œë¥˜ ìš”ì²­</option>
                <option value="ê¸°íƒ€">ğŸ’¬ ê¸°íƒ€</option>
              </select>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1.5">ì œëª© <span class="text-rose-500">*</span></label>
            <input type="text" id="cs-reg-title" placeholder="ë¬¸ì˜ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400">
          </div>
          <div class="grid grid-cols-3 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ë°”ì´ì–´ëª… <span class="text-rose-500">*</span></label>
              <input type="text" id="cs-reg-buyer" placeholder="íšŒì‚¬ëª… ì…ë ¥" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ë°”ì´ì–´ ë“±ê¸‰</label>
              <select id="cs-reg-buyer-level" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400 bg-white">
                <option value="unknown">ì•Œìˆ˜ì—†ìŒ</option>
                <option value="L1">L1</option>
                <option value="L2">L2</option>
                <option value="L3">L3</option>
                <option value="L4">L4</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">êµ­ê°€</label>
              <select id="cs-reg-country" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400 bg-white">
                <option value="ğŸŒ">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="ğŸ‡ºğŸ‡¸">ğŸ‡ºğŸ‡¸ ë¯¸êµ­</option>
                <option value="ğŸ‡©ğŸ‡ª">ğŸ‡©ğŸ‡ª ë…ì¼</option>
                <option value="ğŸ‡¬ğŸ‡§">ğŸ‡¬ğŸ‡§ ì˜êµ­</option>
                <option value="ğŸ‡¯ğŸ‡µ">ğŸ‡¯ğŸ‡µ ì¼ë³¸</option>
                <option value="ğŸ‡¦ğŸ‡º">ğŸ‡¦ğŸ‡º í˜¸ì£¼</option>
                <option value="ğŸ‡¨ğŸ‡¦">ğŸ‡¨ğŸ‡¦ ìºë‚˜ë‹¤</option>
                <option value="ğŸ‡«ğŸ‡·">ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤</option>
                <option value="ğŸ‡¸ğŸ‡¬">ğŸ‡¸ğŸ‡¬ ì‹±ê°€í¬ë¥´</option>
                <option value="ğŸ‡¨ğŸ‡³">ğŸ‡¨ğŸ‡³ ì¤‘êµ­</option>
                <option value="ğŸ‡®ğŸ‡³">ğŸ‡®ğŸ‡³ ì¸ë„</option>
              </select>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1.5">ë¬¸ì˜ ë‚´ìš© <span class="text-rose-500">*</span></label>
            <textarea id="cs-reg-content" rows="4" placeholder="ë°”ì´ì–´ì˜ ë¬¸ì˜ ë‚´ìš©ì„ ìƒì„¸íˆ ì…ë ¥í•˜ì„¸ìš”" class="w-full px-4 py-3 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400 resize-none"></textarea>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ë‹´ë‹¹ì <span class="text-rose-500">*</span></label>
              <select id="cs-reg-assignee" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400 bg-white">
                <option value="">ë‹´ë‹¹ì ì„ íƒ</option>
                <option value="ê¹€ìš´ì˜">ê¹€ìš´ì˜</option>
                <option value="ì´ë§¤ë‹ˆì €">ì´ë§¤ë‹ˆì €</option>
                <option value="ë°•ë‹´ë‹¹">ë°•ë‹´ë‹¹</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ìƒíƒœ</label>
              <select id="cs-reg-status" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-400 bg-white">
                <option value="pending" selected>ğŸ”´ ë¯¸ì²˜ë¦¬</option>
                <option value="progress">ğŸŸ¡ ì²˜ë¦¬ì¤‘</option>
                <option value="completed">ğŸŸ¢ ì™„ë£Œ</option>
              </select>
            </div>
          </div>
        </form>
      </div>
      <div class="px-6 py-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl flex items-center justify-end gap-3">
        <button onclick="closeCSRegisterModal()" class="px-5 py-2.5 border border-slate-300 text-slate-600 rounded-xl text-sm font-medium hover:bg-slate-100 transition-colors">ì·¨ì†Œ</button>
        <button onclick="submitCSRegister()" class="px-5 py-2.5 bg-rose-500 text-white rounded-xl text-sm font-medium hover:bg-rose-600 transition-colors flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
          ë“±ë¡í•˜ê¸°
        </button>
      </div>
    </div>
  </div>

  <!-- ë°”ì´ì–´ ë“±ë¡ ëª¨ë‹¬ -->
  <div id="buyer-register-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4" onclick="closeBuyerRegisterModal(event)">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
    <div class="modal-container relative bg-white rounded-2xl shadow-2xl w-full max-w-xl max-h-[90vh] flex flex-col" onclick="event.stopPropagation()">
      <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-2xl">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
            <span class="text-xl">ğŸ‘¥</span>
          </div>
          <div>
            <h3 class="font-semibold text-slate-800">ë°”ì´ì–´ ë“±ë¡</h3>
            <p class="text-xs text-slate-500">ìƒˆë¡œìš´ ë°”ì´ì–´ ì •ë³´ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤</p>
          </div>
        </div>
        <button onclick="closeBuyerRegisterModal()" class="p-2 hover:bg-white/60 rounded-xl transition-colors">
          <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="flex-1 overflow-y-auto p-6">
        <form id="buyer-register-form" class="space-y-5">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ë°”ì´ì–´ ë“±ê¸‰ <span class="text-rose-500">*</span></label>
              <select id="buyer-reg-level" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 bg-white">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="VIP">ğŸ‘‘ VIP</option>
                <option value="L4">ğŸ”´ L4 (ëŒ€í˜•)</option>
                <option value="L3">ğŸŸ¡ L3 (ì¤‘í˜•)</option>
                <option value="L2">ğŸ”µ L2 (ì†Œí˜•)</option>
                <option value="L1">âšª L1 (ì‹ ê·œ)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ìƒíƒœ</label>
              <select id="buyer-reg-status" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 bg-white">
                <option value="active">ğŸŸ¢ í™œì„±</option>
                <option value="negotiation">ğŸŸ¡ í˜‘ìƒì¤‘</option>
                <option value="dormant">âšª íœ´ë©´</option>
              </select>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1.5">íšŒì‚¬ëª… <span class="text-rose-500">*</span></label>
            <input type="text" id="buyer-reg-company" placeholder="íšŒì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400">
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ë‹´ë‹¹ìëª… <span class="text-rose-500">*</span></label>
              <input type="text" id="buyer-reg-contact" placeholder="ë‹´ë‹¹ìëª… ì…ë ¥" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">êµ­ê°€ <span class="text-rose-500">*</span></label>
              <select id="buyer-reg-country" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 bg-white">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="ğŸ‡ºğŸ‡¸" data-name="ë¯¸êµ­">ğŸ‡ºğŸ‡¸ ë¯¸êµ­</option>
                <option value="ğŸ‡©ğŸ‡ª" data-name="ë…ì¼">ğŸ‡©ğŸ‡ª ë…ì¼</option>
                <option value="ğŸ‡¬ğŸ‡§" data-name="ì˜êµ­">ğŸ‡¬ğŸ‡§ ì˜êµ­</option>
                <option value="ğŸ‡¯ğŸ‡µ" data-name="ì¼ë³¸">ğŸ‡¯ğŸ‡µ ì¼ë³¸</option>
                <option value="ğŸ‡¦ğŸ‡º" data-name="í˜¸ì£¼">ğŸ‡¦ğŸ‡º í˜¸ì£¼</option>
                <option value="ğŸ‡¨ğŸ‡¦" data-name="ìºë‚˜ë‹¤">ğŸ‡¨ğŸ‡¦ ìºë‚˜ë‹¤</option>
                <option value="ğŸ‡«ğŸ‡·" data-name="í”„ë‘ìŠ¤">ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤</option>
                <option value="ğŸ‡¸ğŸ‡¬" data-name="ì‹±ê°€í¬ë¥´">ğŸ‡¸ğŸ‡¬ ì‹±ê°€í¬ë¥´</option>
                <option value="ğŸ‡¨ğŸ‡³" data-name="ì¤‘êµ­">ğŸ‡¨ğŸ‡³ ì¤‘êµ­</option>
              </select>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ì˜ˆìƒ ê±°ë˜ì•¡</label>
              <input type="text" id="buyer-reg-amount" placeholder="ì˜ˆ: $50,000" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ë‹´ë‹¹ì <span class="text-rose-500">*</span></label>
              <select id="buyer-reg-assignee" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 bg-white">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="ê¹€ìš´ì˜">ê¹€ìš´ì˜</option>
                <option value="ì´ë§¤ë‹ˆì €">ì´ë§¤ë‹ˆì €</option>
                <option value="ë°•ë‹´ë‹¹">ë°•ë‹´ë‹¹</option>
              </select>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1.5">ë©”ëª¨</label>
            <textarea id="buyer-reg-memo" rows="3" placeholder="ë°”ì´ì–´ ê´€ë ¨ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 resize-none"></textarea>
          </div>
        </form>
      </div>
      <div class="px-6 py-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl flex items-center justify-end gap-3">
        <button onclick="closeBuyerRegisterModal()" class="px-5 py-2.5 border border-slate-300 text-slate-600 rounded-xl text-sm font-medium hover:bg-slate-100 transition-colors">ì·¨ì†Œ</button>
        <button onclick="submitBuyerRegister()" class="px-5 py-2.5 bg-blue-500 text-white rounded-xl text-sm font-medium hover:bg-blue-600 transition-colors flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
          ë“±ë¡í•˜ê¸°
        </button>
      </div>
    </div>
  </div>

  <!-- ê²¬ì  ë“±ë¡ ëª¨ë‹¬ -->
  <div id="quote-register-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4" onclick="closeQuoteRegisterModal(event)">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
    <div class="modal-container relative bg-white rounded-2xl shadow-2xl w-full max-w-xl max-h-[90vh] flex flex-col" onclick="event.stopPropagation()">
      <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-amber-50 to-orange-50 rounded-t-2xl">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center">
            <span class="text-xl">ğŸ’°</span>
          </div>
          <div>
            <h3 class="font-semibold text-slate-800">ê²¬ì  ë“±ë¡</h3>
            <p class="text-xs text-slate-500">ìƒˆë¡œìš´ ê²¬ì  ì •ë³´ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤</p>
          </div>
        </div>
        <button onclick="closeQuoteRegisterModal()" class="p-2 hover:bg-white/60 rounded-xl transition-colors">
          <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="flex-1 overflow-y-auto p-6">
        <form id="quote-register-form" class="space-y-5">
          <!-- ë°”ì´ì–´ ì„ íƒ -->
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1.5">ë°”ì´ì–´ <span class="text-rose-500">*</span></label>
            <div class="relative">
              <select id="quote-reg-buyer" onchange="onQuoteBuyerChange()" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400 bg-white">
                <option value="">ë°”ì´ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                <option value="__new__">â• ì‹ ê·œ ë°”ì´ì–´ ì§ì ‘ ì…ë ¥</option>
              </select>
            </div>
            <!-- ì‹ ê·œ ë°”ì´ì–´ ì…ë ¥ í•„ë“œ (ìˆ¨ê¹€) -->
            <div id="new-buyer-input-wrap" class="hidden mt-2">
              <input type="text" id="quote-reg-new-buyer" placeholder="ì‹ ê·œ ë°”ì´ì–´ëª… ì…ë ¥" class="w-full px-4 py-2.5 border border-amber-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400 bg-amber-50">
              <p class="text-xs text-amber-600 mt-1">âš ï¸ ë°”ì´ì–´ ê´€ë¦¬ì— ë“±ë¡ë˜ì§€ ì•Šì€ ì‹ ê·œ ë°”ì´ì–´ì…ë‹ˆë‹¤</p>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ìƒí’ˆëª… <span class="text-rose-500">*</span></label>
              <select id="quote-reg-product" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400 bg-white">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ìˆ˜ëŸ‰ <span class="text-rose-500">*</span></label>
              <input type="text" id="quote-reg-qty" placeholder="ì˜ˆ: 1,000" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400">
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ê²¬ì ê¸ˆì•¡ <span class="text-rose-500">*</span></label>
              <input type="text" id="quote-reg-amount" placeholder="ì˜ˆ: $10,000" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400">
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1.5">ìƒíƒœ</label>
              <select id="quote-reg-status" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400 bg-white">
                <option value="request">ğŸ“‹ ê²¬ì  ìš”ì²­</option>
                <option value="negotiation">ğŸ’¬ í˜‘ìƒì¤‘</option>
                <option value="contract">ğŸ“ ê³„ì•½ ì§„í–‰</option>
                <option value="complete">âœ… ì™„ë£Œ</option>
              </select>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1.5">ë‹´ë‹¹ì <span class="text-rose-500">*</span></label>
            <select id="quote-reg-assignee" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400 bg-white">
              <option value="">ì„ íƒí•˜ì„¸ìš”</option>
              <option value="ê¹€ìš´ì˜">ê¹€ìš´ì˜</option>
              <option value="ì´ë§¤ë‹ˆì €">ì´ë§¤ë‹ˆì €</option>
              <option value="ë°•ë‹´ë‹¹">ë°•ë‹´ë‹¹</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1.5">ë©”ëª¨</label>
            <textarea id="quote-reg-memo" rows="2" placeholder="ê²¬ì  ê´€ë ¨ ë©”ëª¨" class="w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-400 resize-none"></textarea>
          </div>
        </form>
      </div>
      <div class="px-6 py-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl flex items-center justify-end gap-3">
        <button onclick="closeQuoteRegisterModal()" class="px-5 py-2.5 border border-slate-300 text-slate-600 rounded-xl text-sm font-medium hover:bg-slate-100 transition-colors">ì·¨ì†Œ</button>
        <button onclick="submitQuoteRegister()" class="px-5 py-2.5 bg-amber-500 text-white rounded-xl text-sm font-medium hover:bg-amber-600 transition-colors flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
          ë“±ë¡í•˜ê¸°
        </button>
      </div>
    </div>
  </div>

  <!-- ì‹ ê·œ ë°”ì´ì–´ í™•ì¸ ëª¨ë‹¬ -->
  <div id="new-buyer-confirm-modal" class="modal-overlay fixed inset-0 z-[60] flex items-center justify-center p-4" onclick="closeNewBuyerConfirmModal(event)">
    <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
    <div class="modal-container relative bg-white rounded-2xl shadow-2xl w-full max-w-sm" onclick="event.stopPropagation()">
      <div class="p-6 text-center">
        <div class="w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <span class="text-3xl">ğŸ†•</span>
        </div>
        <h3 class="text-lg font-semibold text-slate-800 mb-2">ì‹ ê·œ ë°”ì´ì–´ì…ë‹ˆë‹¤</h3>
        <p class="text-sm text-slate-500 mb-1" id="new-buyer-name-display"></p>
        <p class="text-sm text-slate-600 mb-6">ë°”ì´ì–´ ë“±ë¡ì„ ë¨¼ì € ì§„í–‰í• ê¹Œìš”?</p>
        <div class="flex gap-3">
          <button onclick="skipBuyerRegister()" class="flex-1 py-2.5 border border-slate-300 text-slate-600 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors">
            ë‚˜ì¤‘ì— ë“±ë¡
          </button>
          <button onclick="proceedBuyerRegister()" class="flex-1 py-2.5 bg-blue-500 text-white rounded-xl text-sm font-medium hover:bg-blue-600 transition-colors">
            ë°”ì´ì–´ ë“±ë¡
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- í† ìŠ¤íŠ¸ -->
  <div id="toast" class="toast"></div>

  <script>
    // ==================== ë°ì´í„° ====================
    const csData = [
      { id: 1, priority: 'high', type: 'í´ë ˆì„', title: 'ì œí’ˆ íŒŒì† - ê¸´ê¸‰ ì²˜ë¦¬ ìš”ì²­', buyer: 'Global Trade Co.', buyerLevel: 'L4', status: 'pending', assignee: 'ê¹€ìš´ì˜', date: '2025-03-25', country: 'ğŸ‡ºğŸ‡¸', content: 'ê³ ê°ë‹˜ê»˜ì„œ ì£¼ë¬¸í•˜ì‹  ì œí’ˆì´ ë°°ì†¡ ì¤‘ íŒŒì†ë˜ì–´ ë„ì°©í–ˆìŠµë‹ˆë‹¤.', reply: '' },
      { id: 2, priority: 'high', type: 'ë°°ì†¡ ë¬¸ì˜', title: 'ë°°ì†¡ ì§€ì—° ë¬¸ì˜ (2ì£¼ ê²½ê³¼)', buyer: 'Euro Imports GmbH', buyerLevel: 'L3', status: 'pending', assignee: 'ì´ë§¤ë‹ˆì €', date: '2025-03-24', country: 'ğŸ‡©ğŸ‡ª', content: 'ì£¼ë¬¸í•œ ì§€ 2ì£¼ê°€ ì§€ë‚¬ëŠ”ë° ì•„ì§ ë°°ì†¡ì´ ì‹œì‘ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.', reply: '' },
      { id: 3, priority: 'medium', type: 'ìƒí’ˆ ë¬¸ì˜', title: 'ëŒ€ëŸ‰ ì£¼ë¬¸ ì‹œ í• ì¸ìœ¨ ë¬¸ì˜', buyer: 'Pacific Traders', buyerLevel: 'VIP', status: 'progress', assignee: 'ê¹€ìš´ì˜', date: '2025-03-24', country: 'ğŸ‡¦ğŸ‡º', content: '10,000ê°œ ì´ìƒ ëŒ€ëŸ‰ ì£¼ë¬¸ ì‹œ ì¶”ê°€ í• ì¸ì´ ê°€ëŠ¥í•œì§€ ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤.', reply: 'í™•ì¸ ì¤‘ì…ë‹ˆë‹¤.' },
      { id: 4, priority: 'high', type: 'ë°˜í’ˆ/êµí™˜', title: 'ìƒ‰ìƒ ë¶ˆëŸ‰ - êµí™˜ ìš”ì²­', buyer: 'UK Distributors', buyerLevel: 'L3', status: 'pending', assignee: 'ë°•ë‹´ë‹¹', date: '2025-03-23', country: 'ğŸ‡¬ğŸ‡§', content: 'ë°›ì€ ì œí’ˆì˜ ìƒ‰ìƒì´ ì£¼ë¬¸í•œ ê²ƒê³¼ ë‹¤ë¦…ë‹ˆë‹¤.', reply: '' },
      { id: 5, priority: 'medium', type: 'ìƒí’ˆ ë¬¸ì˜', title: 'MOQ ì¡°ì • ê°€ëŠ¥ ì—¬ë¶€ ë¬¸ì˜', buyer: 'Japan Beauty Inc.', buyerLevel: 'L2', status: 'progress', assignee: 'ì´ë§¤ë‹ˆì €', date: '2025-03-23', country: 'ğŸ‡¯ğŸ‡µ', content: 'MOQ 500ê°œì—ì„œ 300ê°œë¡œ ì¡°ì • ê°€ëŠ¥í• ê¹Œìš”?', reply: 'ë³¸ì‚¬ í™•ì¸ í›„ íšŒì‹ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.' },
      { id: 6, priority: 'low', type: 'ìƒí’ˆ ë¬¸ì˜', title: 'ì„±ë¶„í‘œ ì˜ë¬¸ ë²„ì „ ìš”ì²­', buyer: 'Canada Health Ltd.', buyerLevel: 'L1', status: 'completed', assignee: 'ê¹€ìš´ì˜', date: '2025-03-22', country: 'ğŸ‡¨ğŸ‡¦', content: 'ì œí’ˆ ì„±ë¶„í‘œ ì˜ë¬¸ ë²„ì „ íŒŒì¼ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.', reply: 'ì˜ë¬¸ ì„±ë¶„í‘œ íŒŒì¼ ì´ë©”ì¼ë¡œ ë°œì†¡ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.' },
      { id: 7, priority: 'medium', type: 'ë°°ì†¡ ë¬¸ì˜', title: 'DDP ë°°ì†¡ ê°€ëŠ¥ ì—¬ë¶€', buyer: 'French Cosmetics', buyerLevel: 'L2', status: 'completed', assignee: 'ë°•ë‹´ë‹¹', date: '2025-03-21', country: 'ğŸ‡«ğŸ‡·', content: 'DDP ì¡°ê±´ìœ¼ë¡œ ë°°ì†¡ ê°€ëŠ¥í•œì§€ ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤.', reply: 'DDP ë°°ì†¡ ê°€ëŠ¥í•©ë‹ˆë‹¤.' },
    ];

    const buyerData = [
      { id: 1, level: 'VIP', company: 'Pacific Traders Pty Ltd', contact: 'John Smith', country: 'ğŸ‡¦ğŸ‡º', countryName: 'í˜¸ì£¼', amount: '$150,000', status: 'active', lastContact: '2025-03-25', assignee: 'ê¹€ìš´ì˜' },
      { id: 2, level: 'VIP', company: 'Global Beauty Holdings', contact: 'Sarah Chen', country: 'ğŸ‡ºğŸ‡¸', countryName: 'ë¯¸êµ­', amount: '$200,000', status: 'negotiation', lastContact: '2025-03-24', assignee: 'ì´ë§¤ë‹ˆì €' },
      { id: 3, level: 'L4', company: 'Euro Imports GmbH', contact: 'Hans Mueller', country: 'ğŸ‡©ğŸ‡ª', countryName: 'ë…ì¼', amount: '$80,000', status: 'active', lastContact: '2025-03-24', assignee: 'ê¹€ìš´ì˜' },
      { id: 4, level: 'L4', company: 'UK Distributors Ltd', contact: 'James Wilson', country: 'ğŸ‡¬ğŸ‡§', countryName: 'ì˜êµ­', amount: '$65,000', status: 'active', lastContact: '2025-03-23', assignee: 'ë°•ë‹´ë‹¹' },
      { id: 5, level: 'L4', company: 'Tokyo Beauty Co.', contact: 'Yuki Tanaka', country: 'ğŸ‡¯ğŸ‡µ', countryName: 'ì¼ë³¸', amount: '$55,000', status: 'negotiation', lastContact: '2025-03-22', assignee: 'ì´ë§¤ë‹ˆì €' },
      { id: 6, level: 'L3', company: 'Canada Health Ltd', contact: 'Mike Brown', country: 'ğŸ‡¨ğŸ‡¦', countryName: 'ìºë‚˜ë‹¤', amount: '$35,000', status: 'active', lastContact: '2025-03-21', assignee: 'ê¹€ìš´ì˜' },
      { id: 7, level: 'L3', company: 'French Cosmetics SARL', contact: 'Pierre Dubois', country: 'ğŸ‡«ğŸ‡·', countryName: 'í”„ë‘ìŠ¤', amount: '$28,000', status: 'dormant', lastContact: '2025-03-10', assignee: 'ë°•ë‹´ë‹¹' },
      { id: 8, level: 'L2', company: 'Singapore Trading Pte', contact: 'Lee Wei', country: 'ğŸ‡¸ğŸ‡¬', countryName: 'ì‹±ê°€í¬ë¥´', amount: '$15,000', status: 'active', lastContact: '2025-03-20', assignee: 'ì´ë§¤ë‹ˆì €' },
    ];

    const productData = [
      { id: 1, image: 'ğŸª£', name: 'POUR ì¨ë°‹ë°”ì¸ë”', nameEn: 'Pour Summit Binder', category: 'ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ', unit: '18kg', coverage: 'ì•½ 350ã¡', status: 'active', views: 1250, inquiries: 23 },
      { id: 2, image: 'ğŸª£', name: 'POUR ì¨ë°‹í˜ì¸íŠ¸Plus+', nameEn: 'Pour Summit paint Plus+', category: 'ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ', unit: '18L', coverage: 'ì•½ 126ã¡', status: 'active', views: 1180, inquiries: 21 },
      { id: 3, image: 'ğŸª£', name: 'POUR ì½”íŠ¸ì¬ I', nameEn: 'Pour coat material I', category: 'ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ', unit: '20kg', coverage: 'ì•½ 20ã¡', status: 'active', views: 980, inquiries: 18 },
      { id: 4, image: 'ğŸª£', name: 'POUR ì½”íŠ¸ì¬ II', nameEn: 'Pour medium coat material II', category: 'ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ', unit: '20kg', coverage: 'ì•½ 83ã¡', status: 'active', views: 920, inquiries: 15 },
      { id: 5, image: 'ğŸª£', name: 'POUR ìƒë„ì½”íŠ¸ì¬', nameEn: 'Pour top coat material', category: 'ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ', unit: '20kg', coverage: 'ì•½ 40ã¡', status: 'active', views: 890, inquiries: 14 },
      { id: 12, image: 'ğŸ›¢ï¸', name: 'POUR ë°œìˆ˜ì½”íŒ…ì œ', nameEn: 'Pour water repellent', category: 'íŠ¹ìˆ˜ê¸°ëŠ¥ì„± ë„ë£Œ', unit: '18kg', coverage: 'ì•½ 60ã¡', status: 'active', views: 950, inquiries: 16 },
      { id: 13, image: 'ğŸ›¢ï¸', name: 'POUR ì™¸ë²½ ë°œìˆ˜&ë°©ìˆ˜ ì½”íŒ…ì œ', nameEn: 'Pour water-repellent coating', category: 'íŠ¹ìˆ˜ê¸°ëŠ¥ì„± ë„ë£Œ', unit: '18kg', coverage: 'ì•½ 60ã¡', status: 'active', views: 920, inquiries: 15 },
      { id: 23, image: 'ğŸ§ª', name: 'POUR ì¨ë°‹ì—í­ì‹œ í•˜ë„', nameEn: 'Pour Summit epoxy primer', category: 'ìœ ì„± íŠ¹ìˆ˜ë„ë£Œ', unit: '13.5kg', coverage: 'ì•½ 72ã¡', status: 'active', views: 880, inquiries: 14 },
      { id: 32, image: 'ğŸ“¦', name: 'POUR 106íŒŒìš°ë”', nameEn: 'Pour 106powder', category: 'íŒŒìš°ë”', unit: '20kg', coverage: 'ì•½ 5ã¡', status: 'active', views: 720, inquiries: 10 },
      { id: 40, image: 'ğŸ“‹', name: 'POUR ìŠˆí¼ë³µí•©ì••ì¶•ì‹œíŠ¸', nameEn: 'Pour Super Composite Sheet', category: 'íŠ¹ìˆ˜ì‹œíŠ¸', unit: '1ë¡¤', coverage: '-', status: 'active', views: 820, inquiries: 12 },
    ];

    const quoteData = [
      { id: 'Q-2025-001', buyer: 'Pacific Traders Pty Ltd', buyerLevel: 'VIP', product: 'POUR ì¨ë°‹ë°”ì¸ë”', qty: '500ê°œ', amount: '$45,000', status: 'request', date: '2025-03-25', assignee: 'ê¹€ìš´ì˜' },
      { id: 'Q-2025-002', buyer: 'Global Beauty Holdings', buyerLevel: 'VIP', product: 'POUR ë°œìˆ˜ì½”íŒ…ì œ', qty: '1,000ê°œ', amount: '$80,000', status: 'negotiation', date: '2025-03-24', assignee: 'ì´ë§¤ë‹ˆì €' },
      { id: 'Q-2025-003', buyer: 'Euro Imports GmbH', buyerLevel: 'L4', product: 'POUR ì½”íŠ¸ì¬ I', qty: '300ê°œ', amount: '$25,000', status: 'negotiation', date: '2025-03-23', assignee: 'ê¹€ìš´ì˜' },
      { id: 'Q-2025-004', buyer: 'UK Distributors Ltd', buyerLevel: 'L4', product: 'POUR ì¨ë°‹ì—í­ì‹œ í•˜ë„', qty: '200ê°œ', amount: '$18,000', status: 'contract', date: '2025-03-22', assignee: 'ë°•ë‹´ë‹¹' },
      { id: 'Q-2025-005', buyer: 'Tokyo Beauty Co.', buyerLevel: 'L4', product: 'POUR 106íŒŒìš°ë”', qty: '400ê°œ', amount: '$32,000', status: 'negotiation', date: '2025-03-21', assignee: 'ì´ë§¤ë‹ˆì €' },
      { id: 'Q-2025-006', buyer: 'Canada Health Ltd', buyerLevel: 'L3', product: 'POUR ìƒë„ì½”íŠ¸ì¬', qty: '150ê°œ', amount: '$12,000', status: 'contract', date: '2025-03-20', assignee: 'ê¹€ìš´ì˜' },
      { id: 'Q-2025-007', buyer: 'French Cosmetics SARL', buyerLevel: 'L3', product: 'POUR ì¨ë°‹í˜ì¸íŠ¸Plus+', qty: '100ê°œ', amount: '$8,500', status: 'complete', date: '2025-03-15', assignee: 'ë°•ë‹´ë‹¹' },
      { id: 'Q-2025-008', buyer: 'Singapore Trading Pte', buyerLevel: 'L2', product: 'POUR ìŠˆí¼ë³µí•©ì••ì¶•ì‹œíŠ¸', qty: '50ê°œ', amount: '$5,000', status: 'request', date: '2025-03-25', assignee: 'ì´ë§¤ë‹ˆì €' },
    ];

    // ë©€í‹°ìœ ì¦ˆ ë°ì´í„°
    const multiUseProducts = [
      { id: 1, category: 'steel', nameEn: 'Steel Structure Protective Coating', nameKo: 'ì² ê³¨ êµ¬ì¡°ë¬¼ ë³´í˜¸ ì½”íŒ…ì¬', materialEn: 'Water-Based Acrylic Polymer', materialKo: 'ìˆ˜ìš©ì„± ì•„í¬ë¦´ í´ë¦¬ë¨¸', useEn: 'Outdoor Steel Frame Protection', useKo: 'ì•¼ì™¸ ì² ê³¨ í”„ë ˆì„ ë³´í˜¸', featureEn: 'High Adhesion / Rust Prevention / Weather Resistance', featureKo: 'ê³ ì ‘ì°© / ë°©ì²­ / ë‚´í›„ì„±', advantageEn: 'Long-term protection against corrosion', advantageKo: 'ë¶€ì‹ì— ëŒ€í•œ ì¥ê¸° ë³´í˜¸', keywordsEn: ['steel coating', 'rust prevention', 'protective'] },
      { id: 2, category: 'container', nameEn: 'Container Exterior Protective Paint', nameKo: 'ì»¨í…Œì´ë„ˆ ì™¸ë¶€ ë³´í˜¸ ë„ë£Œ', materialEn: 'Water-Based Acrylic Polymer', materialKo: 'ìˆ˜ìš©ì„± ì•„í¬ë¦´ í´ë¦¬ë¨¸', useEn: 'Container Exterior Anti-Corrosion', useKo: 'ì»¨í…Œì´ë„ˆ ì™¸ë¶€ ë°©ì²­', featureEn: 'UV Resistance / Anti-Corrosion', featureKo: 'UV ì €í•­ / ë°©ì²­', advantageEn: 'Protects against marine environment', advantageKo: 'í•´ì–‘ í™˜ê²½ìœ¼ë¡œë¶€í„° ë³´í˜¸', keywordsEn: ['container', 'marine coating', 'anti-corrosion'] },
    ];

    const categoryNames = { steel: 'ì² ê³¨/ê¸ˆì†', container: 'ì»¨í…Œì´ë„ˆ', wood: 'ëª©ì¬', concrete: 'ì½˜í¬ë¦¬íŠ¸', industrial: 'ì‚°ì—…ìš©' };

    let currentCSId = null;
    let selectedMultiuseProduct = null;
    let currentMultiuseData = null;

    // ==================== ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ ====================
    function toggleSideMenu(menu) {
      if (menu === 'operation') {
        // ì´ë¯¸ í™œì„±í™”ëœ ìƒíƒœ
      } else if (menu === 'trade') {
        window.location.href = 'í™•ì¥ê±°ë˜ê´€ë¦¬_ì „ì²´.html';
      }
    }

    function switchSubTab(tab) {
      // ëª¨ë“  ì„œë¸Œì•„ì´í…œ ë¹„í™œì„±í™”
      document.querySelectorAll('.nav-sub-item').forEach(item => item.classList.remove('active'));
      // ëª¨ë“  íƒ­ ìˆ¨ê¹€
      document.querySelectorAll('.operation-tab-content').forEach(content => {
        content.classList.remove('active');
      });
      
      // ì„ íƒëœ íƒ­ í™œì„±í™”
      const tabMap = { cs: 'csTab', buyer: 'buyerTab', product: 'productTab', quote: 'quoteTab' };
      document.getElementById(tabMap[tab]).classList.add('active');
      
      // ì„œë¸Œì•„ì´í…œ í™œì„±í™” (í•´ë‹¹ íƒ­ì˜ nav-sub-item ì°¾ì•„ì„œ í™œì„±í™”)
      const subItems = document.querySelectorAll('.nav-sub-item');
      const tabIndex = { cs: 0, buyer: 1, product: 2, quote: 3 };
      if (subItems[tabIndex[tab]]) {
        subItems[tabIndex[tab]].classList.add('active');
      }
    }

    // ==================== í† ìŠ¤íŠ¸ ====================
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ==================== ìƒíƒœ ë±ƒì§€ í•¨ìˆ˜ ====================
    function getStatusBadge(status, type = 'general') {
      const statusMap = {
        pending: { bg: '#fee2e2', color: '#dc2626', text: 'ë¯¸ì²˜ë¦¬' },
        progress: { bg: '#fef3c7', color: '#d97706', text: 'ì²˜ë¦¬ì¤‘' },
        completed: { bg: '#dcfce7', color: '#16a34a', text: 'ì™„ë£Œ' },
        active: { bg: '#dcfce7', color: '#16a34a', text: 'í™œì„±' },
        negotiation: { bg: '#fef3c7', color: '#d97706', text: 'í˜‘ìƒì¤‘' },
        dormant: { bg: '#f1f5f9', color: '#64748b', text: 'íœ´ë©´' },
        review: { bg: '#dbeafe', color: '#2563eb', text: 'ê²€ìˆ˜ì¤‘' },
        inactive: { bg: '#f1f5f9', color: '#64748b', text: 'ë¹„í™œì„±' },
        request: { bg: '#dbeafe', color: '#2563eb', text: 'ê²¬ì  ìš”ì²­' },
        contract: { bg: '#f3e8ff', color: '#9333ea', text: 'ê³„ì•½ ì§„í–‰' },
        complete: { bg: '#dcfce7', color: '#16a34a', text: 'ì™„ë£Œ' },
      };
      const style = statusMap[status] || { bg: '#f1f5f9', color: '#64748b', text: status };
      return `<span class="status-badge" style="background: ${style.bg}; color: ${style.color};">${style.text}</span>`;
    }

    function getPriorityBadge(priority) {
      const priorityMap = {
        high: { bg: '#fee2e2', color: '#dc2626', text: 'ê¸´ê¸‰' },
        medium: { bg: '#fef3c7', color: '#d97706', text: 'ë³´í†µ' },
        low: { bg: '#dcfce7', color: '#16a34a', text: 'ë‚®ìŒ' },
      };
      const style = priorityMap[priority] || { bg: '#f1f5f9', color: '#64748b', text: priority };
      return `<span class="status-badge" style="background: ${style.bg}; color: ${style.color};">${style.text}</span>`;
    }

    // ==================== ë Œë”ë§ í•¨ìˆ˜ ====================
    function renderCSTable() {
      const tbody = document.getElementById('cs-table-body');
      const statusFilter = document.getElementById('cs-filter-status')?.value || '';
      const priorityFilter = document.getElementById('cs-filter-priority')?.value || '';
      const typeFilter = document.getElementById('cs-filter-type')?.value || '';
      const search = document.getElementById('cs-search')?.value.toLowerCase() || '';
      
      const filtered = csData.filter(item => {
        if (statusFilter && item.status !== statusFilter) return false;
        if (priorityFilter && item.priority !== priorityFilter) return false;
        if (typeFilter && item.type !== typeFilter) return false;
        if (search && !item.title.toLowerCase().includes(search) && !item.buyer.toLowerCase().includes(search)) return false;
        return true;
      });

      tbody.innerHTML = filtered.map((item, idx) => `
        <tr class="cursor-pointer hover:bg-toss-gray-50" onclick="openCSDetail(${item.id})">
          <td class="text-center text-toss-gray-500">${idx + 1}</td>
          <td>${getPriorityBadge(item.priority)}</td>
          <td>${getStatusBadge(item.status)}</td>
          <td class="text-toss-gray-600">${item.type}</td>
          <td class="font-medium">${item.title}</td>
          <td><span class="level-badge level-${item.buyerLevel}">${item.buyerLevel}</span> ${item.buyer}</td>
          <td class="text-toss-gray-600">${item.assignee}</td>
          <td class="text-toss-gray-500">${item.date}</td>
        </tr>
      `).join('');

      // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
      document.getElementById('cs-total').textContent = csData.length;
      document.getElementById('cs-pending').textContent = csData.filter(c => c.status === 'pending').length;
      document.getElementById('cs-progress').textContent = csData.filter(c => c.status === 'progress').length;
      document.getElementById('cs-completed').textContent = csData.filter(c => c.status === 'completed').length;
    }

    function renderBuyerTable() {
      const tbody = document.getElementById('buyer-table-body');
      const levelFilter = document.getElementById('buyer-filter-level')?.value || '';
      const statusFilter = document.getElementById('buyer-filter-status')?.value || '';
      const search = document.getElementById('buyer-search')?.value.toLowerCase() || '';
      
      const filtered = buyerData.filter(item => {
        if (levelFilter && item.level !== levelFilter) return false;
        if (statusFilter && item.status !== statusFilter) return false;
        if (search && !item.company.toLowerCase().includes(search) && !item.contact.toLowerCase().includes(search)) return false;
        return true;
      });

      tbody.innerHTML = filtered.map((item, idx) => `
        <tr class="cursor-pointer hover:bg-toss-gray-50" onclick="openBuyerDetail(${item.id})">
          <td class="text-center text-toss-gray-500">${idx + 1}</td>
          <td><span class="level-badge level-${item.level}">${item.level}</span></td>
          <td class="font-medium">${item.company}</td>
          <td class="text-toss-gray-600">${item.contact}</td>
          <td>${item.country}</td>
          <td class="font-medium">${item.amount}</td>
          <td>${getStatusBadge(item.status)}</td>
          <td class="text-toss-gray-500">${item.lastContact}</td>
          <td class="text-toss-gray-600">${item.assignee}</td>
        </tr>
      `).join('');
    }

    function renderProductTable() {
      const tbody = document.getElementById('product-table-body');
      const categoryFilter = document.getElementById('product-filter-category')?.value || '';
      const statusFilter = document.getElementById('product-filter-status')?.value || '';
      const search = document.getElementById('product-search')?.value.toLowerCase() || '';
      
      const filtered = productData.filter(item => {
        if (categoryFilter && item.category !== categoryFilter) return false;
        if (statusFilter && item.status !== statusFilter) return false;
        if (search && !item.name.toLowerCase().includes(search)) return false;
        return true;
      });

      tbody.innerHTML = filtered.map((item, idx) => `
        <tr class="cursor-pointer hover:bg-toss-gray-50" onclick="openProductDetail(${item.id})">
          <td class="text-center text-toss-gray-500">${idx + 1}</td>
          <td class="text-2xl">${item.image}</td>
          <td class="font-medium">${item.name}</td>
          <td class="text-toss-gray-600">${item.category}</td>
          <td class="text-toss-gray-600">${item.unit}</td>
          <td class="text-toss-gray-600">${item.coverage}</td>
          <td>${getStatusBadge(item.status)}</td>
          <td class="text-toss-gray-600">${item.views.toLocaleString()}</td>
          <td class="font-medium text-navy-500">${item.inquiries}</td>
        </tr>
      `).join('');
    }

    function renderQuoteTable() {
      const tbody = document.getElementById('quote-table-body');
      const statusFilter = document.getElementById('quote-filter-status')?.value || '';
      const search = document.getElementById('quote-search')?.value.toLowerCase() || '';
      
      const filtered = quoteData.filter(item => {
        if (statusFilter && item.status !== statusFilter) return false;
        if (search && !item.buyer.toLowerCase().includes(search) && !item.product.toLowerCase().includes(search)) return false;
        return true;
      });

      tbody.innerHTML = filtered.map(item => `
        <tr class="cursor-pointer hover:bg-toss-gray-50" onclick="openQuoteDetail('${item.id}')">
          <td class="font-mono text-navy-600">${item.id}</td>
          <td><span class="level-badge level-${item.buyerLevel}">${item.buyerLevel}</span> ${item.buyer}</td>
          <td class="font-medium">${item.product}</td>
          <td class="text-toss-gray-600">${item.qty}</td>
          <td class="font-medium">${item.amount}</td>
          <td>${getStatusBadge(item.status)}</td>
          <td class="text-toss-gray-500">${item.date}</td>
          <td class="text-toss-gray-600">${item.assignee}</td>
        </tr>
      `).join('');

      // íŒŒì´í”„ë¼ì¸ ë Œë”ë§
      renderPipeline();

      // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
      document.getElementById('quote-total').textContent = quoteData.length;
      document.getElementById('quote-request').textContent = quoteData.filter(q => q.status === 'request').length;
      document.getElementById('quote-negotiation').textContent = quoteData.filter(q => q.status === 'negotiation').length;
      document.getElementById('quote-contract').textContent = quoteData.filter(q => q.status === 'contract').length;
      document.getElementById('quote-complete').textContent = quoteData.filter(q => q.status === 'complete').length;
    }

    function renderPipeline() {
      const statuses = ['request', 'negotiation', 'contract', 'complete'];
      statuses.forEach(status => {
        const list = document.getElementById(`pipeline-${status}-list`);
        const items = quoteData.filter(q => q.status === status);
        document.getElementById(`pipeline-${status}`).textContent = items.length;
        
        list.innerHTML = items.map(item => `
          <div class="pipeline-card" onclick="openQuoteDetail('${item.id}')">
            <div class="flex items-center justify-between mb-2">
              <span class="text-xs font-mono text-toss-gray-500">${item.id}</span>
              <span class="level-badge level-${item.buyerLevel}">${item.buyerLevel}</span>
            </div>
            <p class="font-medium text-sm text-toss-gray-900 mb-1">${item.buyer}</p>
            <p class="text-xs text-toss-gray-500 mb-2">${item.product}</p>
            <div class="flex items-center justify-between">
              <span class="text-sm font-bold text-navy-600">${item.amount}</span>
              <span class="text-xs text-toss-gray-400">${item.assignee}</span>
            </div>
          </div>
        `).join('');
      });
    }

    // ==================== ìƒì„¸ ëª¨ë‹¬ ====================

    function openCSDetail(id) {
      const item = csData.find(c => c.id === id);
      if (!item) return;
      currentCSId = id;
      
      document.getElementById('modal-icon').textContent = 'ğŸ“‹';
      document.getElementById('modal-type').textContent = 'CS ë¬¸ì˜ ìƒì„¸';
      
      // ë‹µë³€ì´ ìˆìœ¼ë©´ ì„¤ì • ë²„íŠ¼ í‘œì‹œ
      if (item.reply) {
        document.getElementById('modal-edit-btn').classList.remove('hidden');
        document.getElementById('modal-edit-btn').onclick = () => openCSEditMode(id);
      } else {
        document.getElementById('modal-edit-btn').classList.add('hidden');
      }
      
      document.getElementById('modal-content').innerHTML = `
        <div class="space-y-5">
          <!-- ìš°ì„ ìˆœìœ„ & ìƒíƒœ & íƒ€ì… -->
          <div class="flex items-center gap-2">
            ${getPriorityBadge(item.priority)}
            ${getStatusBadge(item.status)}
            <span class="text-sm text-slate-400">${item.type}</span>
          </div>
          
          <!-- ì œëª© & ë“±ë¡ì¼ -->
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-bold text-slate-800">${item.title}</h2>
            <span class="text-sm text-slate-400">${item.date}</span>
          </div>
          
          <!-- ë°”ì´ì–´ ì •ë³´ -->
          <div class="p-3 bg-slate-50 rounded-xl">
            <div class="flex items-center gap-2">
              <span class="level-badge level-${item.buyerLevel}">${item.buyerLevel}</span>
              <span class="font-medium text-slate-800">${item.buyer}</span>
            </div>
            <p class="text-xs text-slate-400 mt-1">${item.country.replace(/[\u{1F1E6}-\u{1F1FF}]/gu, '').trim() || 'KR'} Â· ${item.date}</p>
          </div>
          
          <!-- ë¬¸ì˜ ë‚´ìš© -->
          <div>
            <p class="text-xs text-slate-400 mb-2">ë¬¸ì˜ ë‚´ìš©</p>
            <div class="p-3 bg-white border border-slate-200 rounded-xl">
              <p class="text-sm text-slate-700 leading-relaxed">${item.content || 'ë¬¸ì˜ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.'}</p>
            </div>
          </div>
          
          <!-- ë‹µë³€ ì‘ì„± -->
          <div>
            <p class="text-xs text-slate-400 mb-2">ë‹µë³€ ì‘ì„±</p>
            ${item.reply ? `
              <div class="p-3 bg-emerald-50 border border-emerald-200 rounded-xl">
                <p class="text-sm text-emerald-700 leading-relaxed">${item.reply}</p>
              </div>
            ` : `
              <textarea 
                id="cs-reply-${item.id}" 
                placeholder="ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”..."
                class="w-full p-3 bg-white border border-slate-200 rounded-xl text-sm text-slate-700 resize-none focus:outline-none focus:ring-2 focus:ring-navy-500/20 focus:border-navy-400"
                rows="4"
              ></textarea>
            `}
          </div>
          
          <!-- ë²„íŠ¼ -->
          <div class="flex gap-2">
            ${item.reply ? `
              <button onclick="updateCSStatus(${item.id}, 'completed')" class="flex-1 py-2.5 bg-navy-500 text-white rounded-xl text-sm font-medium hover:bg-navy-600 transition-colors">ì²˜ë¦¬ ì™„ë£Œ</button>
              <button onclick="updateCSStatus(${item.id}, 'progress')" class="flex-1 py-2.5 border border-slate-300 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors">ì²˜ë¦¬ì¤‘</button>
            ` : `
              <button onclick="saveCSReplyAndRefresh(${item.id})" class="flex-1 py-2.5 bg-navy-500 text-white rounded-xl text-sm font-medium hover:bg-navy-600 transition-colors">ë‹µë³€ ì €ì¥</button>
              <button onclick="updateCSStatus(${item.id}, 'completed')" class="flex-1 py-2.5 bg-emerald-500 text-white rounded-xl text-sm font-medium hover:bg-emerald-600 transition-colors">ì²˜ë¦¬ ì™„ë£Œ</button>
            `}
          </div>
          
          <!-- ë‹´ë‹¹ì -->
          <p class="text-xs text-slate-400">ë‹´ë‹¹ì: ${item.assignee}</p>
        </div>
      `;
      document.getElementById('detail-modal').classList.add('show');
    }

    // CS ìˆ˜ì • ëª¨ë“œ
    function openCSEditMode(id) {
      const item = csData.find(c => c.id === id);
      if (!item) return;
      
      document.getElementById('modal-type').textContent = 'CS ë¬¸ì˜ ìˆ˜ì •';
      document.getElementById('modal-edit-btn').classList.add('hidden');
      
      document.getElementById('modal-content').innerHTML = `
        <div class="space-y-4">
          <!-- ìš°ì„ ìˆœìœ„ & ìƒíƒœ -->
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-xs text-slate-500 mb-1">ìš°ì„ ìˆœìœ„ *</label>
              <select id="edit-priority" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-navy-500/20">
                <option value="high" ${item.priority === 'high' ? 'selected' : ''}>ê¸´ê¸‰</option>
                <option value="medium" ${item.priority === 'medium' ? 'selected' : ''}>ë³´í†µ</option>
                <option value="low" ${item.priority === 'low' ? 'selected' : ''}>ë‚®ìŒ</option>
              </select>
            </div>
            <div>
              <label class="block text-xs text-slate-500 mb-1">ìƒíƒœ *</label>
              <select id="edit-status" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-navy-500/20">
                <option value="pending" ${item.status === 'pending' ? 'selected' : ''}>ë¯¸ì²˜ë¦¬</option>
                <option value="progress" ${item.status === 'progress' ? 'selected' : ''}>ì²˜ë¦¬ì¤‘</option>
                <option value="completed" ${item.status === 'completed' ? 'selected' : ''}>ì™„ë£Œ</option>
              </select>
            </div>
          </div>
          
          <!-- ì œëª© -->
          <div>
            <label class="block text-xs text-slate-500 mb-1">ì œëª© *</label>
            <input type="text" id="edit-title" value="${item.title}" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-navy-500/20">
          </div>
          
          <!-- ë¬¸ì˜ ë‚´ìš© -->
          <div>
            <label class="block text-xs text-slate-500 mb-1">ë¬¸ì˜ ë‚´ìš©</label>
            <textarea id="edit-content" rows="3" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-navy-500/20 resize-none">${item.content || ''}</textarea>
          </div>
          
          <!-- ë‹µë³€ -->
          <div>
            <label class="block text-xs text-slate-500 mb-1">ë‹µë³€ / ì²˜ë¦¬ë‚´ìš©</label>
            <textarea id="edit-reply" rows="3" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-navy-500/20 resize-none">${item.reply || ''}</textarea>
          </div>
          
          <!-- ë‹´ë‹¹ì -->
          <div>
            <label class="block text-xs text-slate-500 mb-1">ë‹´ë‹¹ì</label>
            <select id="edit-assignee" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-navy-500/20">
              <option value="ê¹€ìš´ì˜" ${item.assignee === 'ê¹€ìš´ì˜' ? 'selected' : ''}>ê¹€ìš´ì˜</option>
              <option value="ì´ë§¤ë‹ˆì €" ${item.assignee === 'ì´ë§¤ë‹ˆì €' ? 'selected' : ''}>ì´ë§¤ë‹ˆì €</option>
              <option value="ë°•ë‹´ë‹¹" ${item.assignee === 'ë°•ë‹´ë‹¹' ? 'selected' : ''}>ë°•ë‹´ë‹¹</option>
            </select>
          </div>
          
          <!-- ë²„íŠ¼ -->
          <div class="flex gap-2 pt-2">
            <button onclick="saveCSEdit(${id})" class="flex-1 py-2.5 bg-navy-500 text-white rounded-xl text-sm font-medium hover:bg-navy-600">ì €ì¥</button>
            <button onclick="openCSDetail(${id})" class="flex-1 py-2.5 border border-slate-300 text-slate-600 rounded-xl text-sm font-medium hover:bg-slate-50">ì·¨ì†Œ</button>
          </div>
        </div>
      `;
    }

    // CS ìˆ˜ì • ì €ì¥
    function saveCSEdit(id) {
      const item = csData.find(c => c.id === id);
      if (!item) return;
      
      item.priority = document.getElementById('edit-priority').value;
      item.status = document.getElementById('edit-status').value;
      item.title = document.getElementById('edit-title').value;
      item.content = document.getElementById('edit-content').value;
      item.reply = document.getElementById('edit-reply').value;
      item.assignee = document.getElementById('edit-assignee').value;
      
      renderCSTable();
      openCSDetail(id);
      showToast('âœ… ìˆ˜ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
    }

    // ë‹µë³€ ì €ì¥ í›„ ëª¨ë‹¬ ìƒˆë¡œê³ ì¹¨
    function saveCSReplyAndRefresh(id) {
      const textarea = document.getElementById(`cs-reply-${id}`);
      const item = csData.find(c => c.id === id);
      if (item && textarea && textarea.value.trim()) {
        item.reply = textarea.value.trim();
        item.status = 'progress';
        renderCSTable();
        openCSDetail(id); // ëª¨ë‹¬ ìƒˆë¡œê³ ì¹¨
        showToast('ğŸ’¾ ë‹µë³€ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
      } else {
        showToast('âš ï¸ ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
      }
    }

    function openBuyerDetail(id) {
      const item = buyerData.find(b => b.id === id);
      if (!item) return;
      
      // í•´ë‹¹ ë°”ì´ì–´ì˜ ê±°ë˜ë‚´ì—­ ì°¾ê¸°
      const buyerQuotes = quoteData.filter(q => q.buyer === item.company);
      const quotesHtml = buyerQuotes.length > 0 
        ? buyerQuotes.map(q => {
            const statusColors = { request: 'bg-blue-100 text-blue-700', negotiation: 'bg-amber-100 text-amber-700', contract: 'bg-purple-100 text-purple-700', complete: 'bg-emerald-100 text-emerald-700' };
            const statusTexts = { request: 'ê²¬ì  ìš”ì²­', negotiation: 'í˜‘ìƒì¤‘', contract: 'ê³„ì•½ ì§„í–‰', complete: 'ì™„ë£Œ' };
            return `
              <div class="p-3 bg-slate-50 rounded-lg cursor-pointer hover:bg-slate-100 transition-colors" onclick="goToQuoteDetail('${q.id}')">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="font-medium text-slate-800 text-sm">${q.product}</p>
                    <p class="text-xs text-slate-500 mt-0.5">${q.id} Â· ${q.date}</p>
                  </div>
                  <div class="text-right">
                    <span class="status-badge text-xs ${statusColors[q.status]}">${statusTexts[q.status]}</span>
                    <p class="text-sm font-medium text-slate-700 mt-1">${q.amount}</p>
                  </div>
                </div>
              </div>
            `;
          }).join('')
        : '<p class="text-sm text-slate-400 text-center py-4">ê±°ë˜ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>';
      
      document.getElementById('modal-icon').textContent = 'ğŸ‘¥';
      document.getElementById('modal-type').textContent = 'ë°”ì´ì–´ ìƒì„¸';
      document.getElementById('modal-edit-btn').classList.add('hidden');
      document.getElementById('modal-content').innerHTML = `
        <div class="space-y-6">
          <div class="flex items-center gap-4">
            <div class="w-16 h-16 bg-gradient-to-br from-navy-400 to-navy-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold">
              ${item.company.charAt(0)}
            </div>
            <div>
              <span class="level-badge level-${item.level}">${item.level}</span>
              <h2 class="text-lg font-bold text-slate-800 mt-1">${item.company}</h2>
              <p class="text-sm text-slate-500">${item.country} ${item.countryName}</p>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="p-4 bg-slate-50 rounded-xl">
              <p class="text-xs text-slate-400 mb-1">ì˜ˆìƒ ê±°ë˜ì•¡</p>
              <p class="text-xl font-bold text-slate-800">${item.amount}</p>
            </div>
            <div class="p-4 bg-slate-50 rounded-xl">
              <p class="text-xs text-slate-400 mb-1">ìƒíƒœ</p>
              <span class="status-badge ${item.status === 'active' ? 'bg-emerald-100 text-emerald-700' : item.status === 'negotiation' ? 'bg-amber-100 text-amber-700' : 'bg-slate-100 text-slate-600'}">${item.status === 'active' ? 'í™œì„±' : item.status === 'negotiation' ? 'í˜‘ìƒì¤‘' : 'íœ´ë©´'}</span>
            </div>
          </div>
          <div>
            <p class="text-xs text-slate-400 mb-2">ë‹´ë‹¹ì ì •ë³´</p>
            <div class="p-4 bg-white border border-slate-200 rounded-xl">
              <p class="font-medium text-slate-800">${item.contact}</p>
              <p class="text-sm text-slate-500 mt-1">ğŸ“§ ${item.contact.toLowerCase().replace(' ', '.')}@company.com</p>
              <p class="text-sm text-slate-500">ğŸ“ +1 234 567 8900</p>
            </div>
          </div>
          <div>
            <div class="flex items-center justify-between mb-2">
              <p class="text-xs text-slate-400">ê±°ë˜ë‚´ì—­</p>
              <span class="text-xs text-slate-400">${buyerQuotes.length}ê±´</span>
            </div>
            <div class="border border-slate-200 rounded-xl overflow-hidden">
              <div class="max-h-40 overflow-y-auto space-y-1 p-2">
                ${quotesHtml}
              </div>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="text-xs text-slate-400 mb-1">ë‹´ë‹¹ ë§¤ë‹ˆì €</p>
              <p class="text-sm font-medium text-slate-700">${item.assignee}</p>
            </div>
            <div>
              <p class="text-xs text-slate-400 mb-1">ìµœê·¼ ì—°ë½</p>
              <p class="text-sm text-slate-700">${item.lastContact}</p>
            </div>
          </div>
          <div class="flex gap-2">
            <button class="flex-1 py-2.5 bg-navy-500 text-white rounded-xl text-sm font-medium hover:bg-navy-600 transition-colors">ê²¬ì ì„œ ë°œì†¡</button>
            <button class="flex-1 py-2.5 border border-slate-300 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors">ì—°ë½í•˜ê¸°</button>
          </div>
        </div>
      `;
      
      document.getElementById('detail-modal').classList.add('show');
    }

    // ê±°ë˜ë‚´ì—­ í´ë¦­ ì‹œ ê²¬ì  ìƒì„¸ë¡œ ì´ë™
    function goToQuoteDetail(quoteId) {
      closeDetailModal();
      setTimeout(() => {
        // ê²¬ì /í˜‘ìƒê´€ë¦¬ íƒ­ìœ¼ë¡œ ì „í™˜
        switchSubTab('quote');
        setTimeout(() => {
          openQuoteDetail(quoteId);
        }, 100);
      }, 200);
    }

    function openProductDetail(id) {
      const item = productData.find(p => p.id === id);
      if (!item) return;
      
      if (item.category === 'ìˆ˜ìš©ì„± íŠ¹ìˆ˜ ë„ë£Œ') {
        openMultiuseModal(item);
        return;
      }
      
      document.getElementById('modal-icon').textContent = 'ğŸ“¦';
      document.getElementById('modal-type').textContent = 'ìƒí’ˆ ìƒì„¸';
      document.getElementById('modal-edit-btn').classList.add('hidden');
      document.getElementById('modal-content').innerHTML = `
        <div class="space-y-6">
          <div class="flex items-center gap-4">
            <div class="w-20 h-20 bg-slate-100 rounded-xl flex items-center justify-center text-4xl">
              ${item.image}
            </div>
            <div>
              <span class="status-badge ${item.status === 'active' ? 'bg-emerald-100 text-emerald-700' : item.status === 'review' ? 'bg-amber-100 text-amber-700' : 'bg-slate-100 text-slate-600'}">${item.status === 'active' ? 'í™œì„±' : item.status === 'review' ? 'ê²€ìˆ˜ì¤‘' : 'ë¹„í™œì„±'}</span>
              <h2 class="text-lg font-bold text-slate-800 mt-1">${item.name}</h2>
              <p class="text-sm text-slate-500">${item.category}</p>
            </div>
          </div>
          <div class="grid grid-cols-3 gap-4">
            <div class="p-4 bg-slate-50 rounded-xl text-center">
              <p class="text-xs text-slate-400 mb-1">ê·œê²©</p>
              <p class="text-lg font-bold text-slate-800">${item.unit}</p>
            </div>
            <div class="p-4 bg-slate-50 rounded-xl text-center">
              <p class="text-xs text-slate-400 mb-1">ë„í¬ëŸ‰</p>
              <p class="text-lg font-bold text-slate-800">${item.coverage}</p>
            </div>
            <div class="p-4 bg-slate-50 rounded-xl text-center">
              <p class="text-xs text-slate-400 mb-1">ë¬¸ì˜ìˆ˜</p>
              <p class="text-lg font-bold text-navy-600">${item.inquiries}</p>
            </div>
          </div>
          <div>
            <p class="text-xs text-slate-400 mb-2">ë¦¬ìŠ¤íŒ… ì„±ê³¼</p>
            <div class="p-4 bg-white border border-slate-200 rounded-xl">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-slate-600">ì¡°íšŒìˆ˜</span>
                <span class="font-medium text-slate-800">${item.views.toLocaleString()}</span>
              </div>
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-slate-600">ë¬¸ì˜ ì „í™˜ìœ¨</span>
                <span class="font-medium text-emerald-600">${((item.inquiries / item.views) * 100).toFixed(1)}%</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm text-slate-600">í‰ê·  ì¼ì¼ ì¡°íšŒ</span>
                <span class="font-medium text-slate-800">${Math.round(item.views / 30)}</span>
              </div>
            </div>
          </div>
          <div class="flex gap-2">
            <button class="flex-1 py-2.5 bg-navy-500 text-white rounded-xl text-sm font-medium hover:bg-navy-600 transition-colors">ë¦¬ìŠ¤íŒ… ìˆ˜ì •</button>
            <button class="flex-1 py-2.5 border border-slate-300 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors">ì„±ê³¼ ë¶„ì„</button>
          </div>
        </div>
      `;
      document.getElementById('detail-modal').classList.add('show');
    }

    function openQuoteDetail(id) {
      const item = quoteData.find(q => q.id === id);
      if (!item) return;
      
      const statusColors = { request: 'bg-blue-100 text-blue-700', negotiation: 'bg-amber-100 text-amber-700', contract: 'bg-purple-100 text-purple-700', complete: 'bg-emerald-100 text-emerald-700' };
      const statusTexts = { request: 'ê²¬ì  ìš”ì²­', negotiation: 'í˜‘ìƒì¤‘', contract: 'ê³„ì•½ ì§„í–‰', complete: 'ì™„ë£Œ' };
      
      document.getElementById('modal-icon').textContent = 'ğŸ’°';
      document.getElementById('modal-type').textContent = 'ê²¬ì  ìƒì„¸';
      document.getElementById('modal-edit-btn').classList.add('hidden');
      document.getElementById('modal-content').innerHTML = `
        <div class="space-y-6">
          <div>
            <div class="flex items-center gap-2 mb-2">
              <span class="text-sm font-mono text-navy-600">${item.id}</span>
              <span class="status-badge ${statusColors[item.status]}">${statusTexts[item.status]}</span>
            </div>
            <h2 class="text-lg font-bold text-slate-800">${item.product}</h2>
          </div>
          <div class="p-4 bg-slate-50 rounded-xl">
            <p class="text-xs text-slate-400 mb-2">ë°”ì´ì–´</p>
            <div class="flex items-center gap-2">
              <span class="level-badge level-${item.buyerLevel}">${item.buyerLevel}</span>
              <span class="font-medium text-slate-800">${item.buyer}</span>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="p-4 bg-white border border-slate-200 rounded-xl">
              <p class="text-xs text-slate-400 mb-1">ì£¼ë¬¸ ìˆ˜ëŸ‰</p>
              <p class="text-xl font-bold text-slate-800">${item.qty}</p>
            </div>
            <div class="p-4 bg-indigo-50 border border-indigo-200 rounded-xl">
              <p class="text-xs text-indigo-500 mb-1">ê²¬ì  ê¸ˆì•¡</p>
              <p class="text-xl font-bold text-indigo-700">${item.amount}</p>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="text-xs text-slate-400 mb-1">ìš”ì²­ì¼</p>
              <p class="text-sm font-medium text-slate-700">${item.date}</p>
            </div>
            <div>
              <p class="text-xs text-slate-400 mb-1">ë‹´ë‹¹ì</p>
              <p class="text-sm font-medium text-slate-700">${item.assignee}</p>
            </div>
          </div>
          <div>
            <p class="text-xs text-slate-400 mb-2">í˜‘ìƒ ì´ë ¥</p>
            <div class="space-y-2">
              <div class="p-3 bg-white border border-slate-200 rounded-lg">
                <div class="flex items-center justify-between mb-1">
                  <span class="text-xs font-medium text-slate-600">1ì°¨ ê²¬ì  ë°œì†¡</span>
                  <span class="text-xs text-slate-400">2025-03-23</span>
                </div>
                <p class="text-sm text-slate-700">$62,500 ì œì•ˆ</p>
              </div>
              <div class="p-3 bg-white border border-slate-200 rounded-lg">
                <div class="flex items-center justify-between mb-1">
                  <span class="text-xs font-medium text-slate-600">ë°”ì´ì–´ ì‘ë‹µ</span>
                  <span class="text-xs text-slate-400">2025-03-24</span>
                </div>
                <p class="text-sm text-slate-700">5% ì¶”ê°€ í• ì¸ ìš”ì²­</p>
              </div>
            </div>
          </div>
          <div class="flex gap-2">
            <button class="flex-1 py-2.5 bg-navy-500 text-white rounded-xl text-sm font-medium hover:bg-navy-600 transition-colors">ê²¬ì ì„œ ìˆ˜ì •</button>
            <button class="flex-1 py-2.5 border border-slate-300 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors">ê³„ì•½ì„œ ë°œì†¡</button>
          </div>
        </div>
      `;
      document.getElementById('detail-modal').classList.add('show');
    }

    // ê²¬ì  ìƒíƒœ ë³€ê²½
    function updateQuoteStatus(id, newStatus) {
      const item = quoteData.find(q => q.id === id);
      if (item) {
        item.status = newStatus;
        renderQuoteTable();
        closeDetailModal();
        showToast('âœ… ê²¬ì  ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
      }
    }

    function closeDetailModal(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('detail-modal').classList.remove('show');
    }

    // ==================== CS ê¸°ëŠ¥ ====================
    function saveCSReply(id) {
      const textarea = document.getElementById(`cs-reply-${id}`);
      const item = csData.find(c => c.id === id);
      if (item && textarea && textarea.value.trim()) {
        item.reply = textarea.value.trim();
        item.status = 'progress';
        renderCSTable();
        openCSDetail(id);
        showToast('ğŸ’¾ ë‹µë³€ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
      } else {
        showToast('âš ï¸ ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
      }
    }

    function updateCSStatus(id, newStatus) {
      const item = csData.find(c => c.id === id);
      if (item) {
        item.status = newStatus;
        renderCSTable();
        closeDetailModal();
        showToast('âœ… ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
      }
    }

    // ==================== ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸° ====================
    function openCSRegisterModal() {
      document.getElementById('cs-register-modal').classList.add('show');
    }

    function closeCSRegisterModal(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('cs-register-modal').classList.remove('show');
      document.getElementById('cs-register-form').reset();
    }

    function submitCSRegister() {
      const priority = document.getElementById('cs-reg-priority').value;
      const type = document.getElementById('cs-reg-type').value;
      const title = document.getElementById('cs-reg-title').value.trim();
      const buyer = document.getElementById('cs-reg-buyer').value.trim();
      const buyerLevel = document.getElementById('cs-reg-buyer-level').value;
      const country = document.getElementById('cs-reg-country').value;
      const content = document.getElementById('cs-reg-content').value.trim();
      const assignee = document.getElementById('cs-reg-assignee').value;
      const status = document.getElementById('cs-reg-status').value;

      if (!priority || !type || !title || !buyer || !assignee) {
        showToast('âš ï¸ í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
        return;
      }

      const newCS = {
        id: csData.length + 1,
        priority,
        type,
        title,
        buyer,
        buyerLevel: buyerLevel === 'unknown' ? 'L1' : buyerLevel,
        status,
        assignee,
        date: new Date().toISOString().split('T')[0],
        country,
        content,
        reply: ''
      };

      csData.unshift(newCS);
      renderCSTable();
      closeCSRegisterModal();
      showToast('âœ… CS ë¬¸ì˜ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤');
    }

    function openBuyerRegisterModal() {
      document.getElementById('buyer-register-modal').classList.add('show');
    }

    function closeBuyerRegisterModal(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('buyer-register-modal').classList.remove('show');
      document.getElementById('buyer-register-form').reset();
    }

    function submitBuyerRegister() {
      const level = document.getElementById('buyer-reg-level').value;
      const status = document.getElementById('buyer-reg-status').value;
      const company = document.getElementById('buyer-reg-company').value.trim();
      const contact = document.getElementById('buyer-reg-contact').value.trim();
      const countrySelect = document.getElementById('buyer-reg-country');
      const country = countrySelect.value;
      const countryName = countrySelect.options[countrySelect.selectedIndex]?.dataset?.name || '';
      const amount = document.getElementById('buyer-reg-amount').value.trim() || '-';
      const assignee = document.getElementById('buyer-reg-assignee').value;

      if (!level || !company || !contact || !country || !assignee) {
        showToast('âš ï¸ í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
        return;
      }

      const newBuyer = {
        id: buyerData.length + 1,
        level,
        company,
        contact,
        country,
        countryName,
        amount,
        status,
        lastContact: new Date().toISOString().split('T')[0],
        assignee
      };

      buyerData.unshift(newBuyer);
      renderBuyerTable();
      closeBuyerRegisterModal();
      showToast('âœ… ë°”ì´ì–´ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤');
    }

    let pendingQuoteData = null;
    let pendingNewBuyerName = '';

    function openQuoteRegisterModal() {
      // ë°”ì´ì–´ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ ì±„ìš°ê¸°
      const buyerSelect = document.getElementById('quote-reg-buyer');
      buyerSelect.innerHTML = `
        <option value="">ë°”ì´ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
        <option value="__new__">â• ì‹ ê·œ ë°”ì´ì–´ ì§ì ‘ ì…ë ¥</option>
        ${buyerData.map(b => `<option value="${b.company}">${b.country} ${b.company} (${b.level})</option>`).join('')}
      `;
      
      // ìƒí’ˆ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ ì±„ìš°ê¸°
      const productSelect = document.getElementById('quote-reg-product');
      productSelect.innerHTML = `
        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
        ${productData.map(p => `<option value="${p.name}">${p.name}</option>`).join('')}
      `;
      
      document.getElementById('quote-register-modal').classList.add('show');
    }

    function closeQuoteRegisterModal(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('quote-register-modal').classList.remove('show');
      document.getElementById('quote-register-form').reset();
      document.getElementById('new-buyer-input-wrap').classList.add('hidden');
      pendingQuoteData = null;
    }

    function onQuoteBuyerChange() {
      const value = document.getElementById('quote-reg-buyer').value;
      const newBuyerWrap = document.getElementById('new-buyer-input-wrap');
      
      if (value === '__new__') {
        newBuyerWrap.classList.remove('hidden');
      } else {
        newBuyerWrap.classList.add('hidden');
      }
    }

    function submitQuoteRegister() {
      const buyerSelect = document.getElementById('quote-reg-buyer').value;
      const newBuyerName = document.getElementById('quote-reg-new-buyer').value.trim();
      const product = document.getElementById('quote-reg-product').value;
      const qty = document.getElementById('quote-reg-qty').value.trim();
      const amount = document.getElementById('quote-reg-amount').value.trim();
      const status = document.getElementById('quote-reg-status').value;
      const assignee = document.getElementById('quote-reg-assignee').value;

      // ë°”ì´ì–´ ê²°ì •
      let buyerName = '';
      if (buyerSelect === '__new__') {
        if (!newBuyerName) {
          showToast('âš ï¸ ì‹ ê·œ ë°”ì´ì–´ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
          return;
        }
        buyerName = newBuyerName;
        
        // ê¸°ì¡´ ë°”ì´ì–´ ì¤‘ ë™ì¼ ì´ë¦„ ì²´í¬
        const existingBuyer = buyerData.find(b => b.company.toLowerCase() === newBuyerName.toLowerCase());
        if (!existingBuyer) {
          // ì‹ ê·œ ë°”ì´ì–´ í™•ì¸ ëª¨ë‹¬
          pendingQuoteData = { product, qty, amount, status, assignee, buyerName };
          pendingNewBuyerName = newBuyerName;
          document.getElementById('new-buyer-name-display').textContent = `"${newBuyerName}"`;
          document.getElementById('new-buyer-confirm-modal').classList.add('show');
          return;
        }
      } else {
        buyerName = buyerSelect;
      }

      if (!buyerName || !product || !qty || !amount || !assignee) {
        showToast('âš ï¸ í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
        return;
      }

      // ê²¬ì  ë“±ë¡ ì‹¤í–‰
      registerQuote(buyerName, product, qty, amount, status, assignee);
    }

    function registerQuote(buyerName, product, qty, amount, status, assignee) {
      // ë°”ì´ì–´ ë“±ê¸‰ ì°¾ê¸°
      const buyer = buyerData.find(b => b.company === buyerName);
      const buyerLevel = buyer ? buyer.level : 'L1';

      // ìƒˆ ê²¬ì ë²ˆí˜¸ ìƒì„±
      const newId = `Q-2025-${String(quoteData.length + 1).padStart(3, '0')}`;
      
      const newQuote = {
        id: newId,
        buyer: buyerName,
        buyerLevel: buyerLevel,
        product: product,
        qty: qty,
        amount: amount,
        status: status,
        date: new Date().toISOString().split('T')[0],
        assignee: assignee
      };

      quoteData.unshift(newQuote);
      renderQuoteTable();
      closeQuoteRegisterModal();
      showToast('âœ… ê²¬ì ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤');
    }

    // ì‹ ê·œ ë°”ì´ì–´ í™•ì¸ ëª¨ë‹¬ í•¨ìˆ˜
    function closeNewBuyerConfirmModal(event) {
      if (event && event.target !== event.currentTarget) return;
      document.getElementById('new-buyer-confirm-modal').classList.remove('show');
    }

    function skipBuyerRegister() {
      // ë°”ì´ì–´ ë“±ë¡ ì—†ì´ ê²¬ì ë§Œ ë“±ë¡ (ì‹ ê·œ ë°”ì´ì–´ë¡œ)
      document.getElementById('new-buyer-confirm-modal').classList.remove('show');
      
      if (pendingQuoteData) {
        // ì„ì‹œ ë°”ì´ì–´ ë°ì´í„° ì¶”ê°€ (L1 ì‹ ê·œ)
        const tempBuyer = {
          id: buyerData.length + 100,
          level: 'L1',
          company: pendingNewBuyerName,
          contact: '-',
          country: 'ğŸŒ',
          countryName: 'ë¯¸ì§€ì •',
          amount: '-',
          status: 'active',
          lastContact: new Date().toISOString().split('T')[0],
          assignee: pendingQuoteData.assignee
        };
        buyerData.unshift(tempBuyer);
        
        registerQuote(
          pendingQuoteData.buyerName,
          pendingQuoteData.product,
          pendingQuoteData.qty,
          pendingQuoteData.amount,
          pendingQuoteData.status,
          pendingQuoteData.assignee
        );
      }
      pendingQuoteData = null;
      pendingNewBuyerName = '';
    }

    function proceedBuyerRegister() {
      // ë°”ì´ì–´ ë“±ë¡ ëª¨ë‹¬ ì—´ê¸°
      document.getElementById('new-buyer-confirm-modal').classList.remove('show');
      document.getElementById('quote-register-modal').classList.remove('show');
      
      // ë°”ì´ì–´ ë“±ë¡ ëª¨ë‹¬ ì—´ê³  íšŒì‚¬ëª… ë¯¸ë¦¬ ì±„ìš°ê¸°
      openBuyerRegisterModal();
      setTimeout(() => {
        document.getElementById('buyer-reg-company').value = pendingNewBuyerName;
      }, 100);
    }

    // ==================== ë©€í‹°ìœ ì¦ˆ ëª¨ë‹¬ ====================
    function openMultiuseModal(item) {
      document.getElementById('multiuse-title').textContent = item.name;
      document.getElementById('multiuse-subtitle').textContent = `${item.nameEn} Â· ë©€í‹°ìœ ì¦ˆ ${multiUseProducts.length}ê°œ ì œí’ˆ`;
      document.getElementById('multiuse-count').textContent = multiUseProducts.length;
      
      selectedMultiuseProduct = multiUseProducts[0];
      currentMultiuseData = { products: multiUseProducts };
      renderMultiuseProductList();
      renderMultiuseDetail();
      
      document.getElementById('multiuse-modal').classList.add('show');
    }

    function closeMultiuseModal(e) {
      if (e && e.target !== e.currentTarget) return;
      document.getElementById('multiuse-modal').classList.remove('show');
      document.getElementById('multiuseSearchInput').value = '';
    }

    function renderMultiuseProductList(filter = '') {
      if (!currentMultiuseData) return;
      const container = document.getElementById('multiuseProductList');
      const filtered = currentMultiuseData.products.filter(p => 
        p.nameKo.toLowerCase().includes(filter.toLowerCase()) || 
        p.nameEn.toLowerCase().includes(filter.toLowerCase())
      );
      container.innerHTML = filtered.map(product => {
        const isActive = selectedMultiuseProduct && selectedMultiuseProduct.id === product.id;
        return `<div class="px-3 py-2 rounded-lg cursor-pointer hover:bg-slate-100 ${isActive ? 'bg-white font-semibold' : ''}" onclick="selectMultiuseProduct(${product.id})">
          <p class="text-sm truncate text-slate-700">${product.nameKo}</p>
          <p class="text-xs truncate text-slate-400">${product.nameEn}</p>
        </div>`;
      }).join('');
    }

    function selectMultiuseProduct(id) {
      if (!currentMultiuseData) return;
      selectedMultiuseProduct = currentMultiuseData.products.find(p => p.id === id);
      renderMultiuseProductList(document.getElementById('multiuseSearchInput').value);
      renderMultiuseDetail();
    }

    function renderMultiuseDetail() {
      if (!selectedMultiuseProduct) return;
      const p = selectedMultiuseProduct;
      document.getElementById('multiuseDetailContent').innerHTML = `
        <div>
          <div class="mb-6">
            <span class="inline-block px-2 py-0.5 bg-emerald-100 text-emerald-600 rounded text-xs font-medium mb-2">ì™„ì„±</span>
            <h3 class="text-lg font-bold text-slate-800">${p.nameKo}</h3>
            <p class="text-slate-400 text-sm">${categoryNames[p.category]}</p>
          </div>
          <div>
            <p class="text-xs text-slate-400 mb-3">ì•Œë¦¬ë°”ë°” ìƒì„¸ì •ë³´</p>
            <div class="border border-slate-200 rounded-xl p-4 space-y-4">
              <div><p class="text-xs text-slate-400 mb-1">ì˜ë¬¸ ì œí’ˆëª…</p><p class="text-sm text-slate-700">${p.nameEn}</p></div>
              <div><p class="text-xs text-slate-400 mb-1">Material / ì¬ì§ˆ</p><p class="text-sm text-slate-700">${p.materialEn}</p><p class="text-xs text-slate-500">${p.materialKo}</p></div>
              <div><p class="text-xs text-slate-400 mb-1">Application / ìš©ë„</p><p class="text-sm text-slate-700">${p.useEn}</p><p class="text-xs text-slate-500">${p.useKo}</p></div>
              <div><p class="text-xs text-slate-400 mb-1">Features / íŠ¹ì§•</p><p class="text-sm text-slate-700">${p.featureEn}</p><p class="text-xs text-slate-500">${p.featureKo}</p></div>
              <div><p class="text-xs text-slate-400 mb-1">Advantages / ì¥ì </p><p class="text-sm text-slate-700">${p.advantageEn}</p><p class="text-xs text-slate-500">${p.advantageKo}</p></div>
              <div><p class="text-xs text-slate-400 mb-2">Keywords (${p.keywordsEn.length})</p><div class="flex flex-wrap gap-1">${p.keywordsEn.map(k => `<span class="inline-block px-2 py-0.5 text-xs bg-slate-100 text-slate-600 rounded">${k}</span>`).join('')}</div></div>
            </div>
          </div>
        </div>
      `;
    }

    function filterMultiuseProducts() {
      if (!currentMultiuseData) return;
      renderMultiuseProductList(document.getElementById('multiuseSearchInput').value);
    }

    // ==================== ì´ˆê¸°í™” ====================
    document.addEventListener('DOMContentLoaded', function() {
      renderCSTable();
      renderBuyerTable();
      renderProductTable();
      renderQuoteTable();
    });
  </script>
</body>
</html>
